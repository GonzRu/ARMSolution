<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:SilverlightControlsLibrary" 
     
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    mc:Ignorable="d">
    
    <local:SizeConverter x:Key="SizeConverter"/>

    <Style TargetType="local:CAutomaticSwitch">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CAutomaticSwitch">
                    <Grid Height="90" Width="180" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30" />
                            <RowDefinition Height="30"/>
                            <RowDefinition Height="30"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>

                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter1"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">
                                <VisualState x:Name="VisualStateOn">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="On"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefined"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefinedQuestion"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateOff">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="On"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefined"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefinedQuestion"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOn">
                                    <!--РєР°Рє VisualStateUnDefined-->
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="On"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefined"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefinedQuestion"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOff">
                                    <!--РєР°Рє VisualStateUnDefined-->
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="On"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefined"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefinedQuestion"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateBroken">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="On"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefined"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefinedQuestion"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateUnDefined">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="On"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefined"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefinedQuestion"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateManualPE">
                                    <!--РєР°Рє VisualStateUnDefined-->
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="On"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefined"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefinedQuestion"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateOutOfWork">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="On"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefined"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefinedQuestion"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BorderLocalControlBlock"/>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BorderLocalControlUnBlock"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="LocalControlBlock">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BorderLocalControlBlock"/>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BorderLocalControlUnBlock"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="LocalControlUnBlock">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BorderLocalControlBlock"/>
                                        <DoubleAnimation Duration="0:0:0.5" AutoReverse="True" RepeatBehavior="Forever" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BorderLocalControlUnBlock"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid x:Name="RootGrid" local:CBaseControl.AttachedASUAngle="{TemplateBinding ASUAngle}" Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" Width="30" Height="30" RenderTransformOrigin="0.5,0.5">

                            <Canvas Width="28" Height="28" x:Name="RootCanvas">
                                <!--Background="#FF505050"-->
                                <Path Visibility="{TemplateBinding ASUConnectorVisibility}" Opacity="1" x:Name="LeftConnector" Canvas.Left="0" Canvas.Top="0" Data="M-16,14 2,14" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1"/>
                                <Path Visibility="{TemplateBinding ASUConnectorVisibility}" Opacity="1" x:Name="RightConnector" Canvas.Left="0" Canvas.Top="0" Data="M25,14 44,14" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1"/>

                                <Rectangle Margin="1" Opacity="0" x:Name="On" Fill="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" Width="26" Height="26"/>
                                <Rectangle Margin="1" Opacity="0" x:Name="UnDefined" Fill="LightGray"  StrokeThickness="3" Width="26" Height="26"/>
                                <Rectangle Margin="1" Opacity="0" x:Name="OutOfWork" Stroke="#FFCDFF9B" StrokeThickness="3" Width="26" Height="26"/>
                                <Rectangle Margin="1" Opacity="1" x:Name="Body" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" Width="26" Height="26"/>
                                <Path Opacity="0" x:Name="Broken" Canvas.Left="0" Canvas.Top="0" Data="M28,-1 -1,28" Stroke="Red" StrokeThickness="3"/>

                                <Border Opacity="0" Background="LightYellow" BorderThickness="2" BorderBrush="Yellow" CornerRadius="1" Grid.Row="1" Grid.Column="1" x:Name="BorderLocalControlBlock" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" />
                                <Border Opacity="0" Background="LightPink" BorderThickness="2" BorderBrush="Red" CornerRadius="1" Grid.Row="1" Grid.Column="1" x:Name="BorderLocalControlUnBlock" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}"  />

                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black"  />
                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />

                            </Canvas>

                        </Grid>
                        <TextBlock Opacity="0" x:Name="UnDefinedQuestion" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="16" FontWeight="Bold" Foreground="{TemplateBinding ASUVoltageColor}"><Run Text="?"/></TextBlock>
                        <Path Grid.Row="1" Grid.Column="1" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="0,10,0,-10" Opacity="0.4" 
                                  Visibility="{TemplateBinding ASUManualSetVisibility}" Width="20" Height="20" Stretch="Fill" Stroke="Black" Fill="Green" StrokeThickness="0.8" x:Name="Hand"                                   
                                   Data="M1.5,9 L2,8 L3,8 L6.5,12 
                                      L6,2 L7,1.5 L8,2
                                      L8.5,8 L9,8 
                                      L9,1 L10,0.5 L11,1 
                                      L11,8 L11.5,8.5
                                      L12,2 L13,1.5 L14,2 
                                      L13.5,9 L14,9 
                                      L15,4 L16,3.5 L17,4 L16,11
                                      L16,16 L15,18 L8,18 z" ToolTipService.ToolTip="Положение введено вручную"/>
                        
                        
                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowContent}" Grid.Column="{TemplateBinding ASUGridColumnContent}"  x:Name="contentPresenter1" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Margin="{TemplateBinding ASUMarginContent}" Opacity="1"/>
                        <Canvas Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowASUTextContent}" Grid.Column="{TemplateBinding ASUGridColumnASUTextContent}" >
                            <TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Height="Auto" Width="{TemplateBinding ASUTextContentWidth}" VerticalAlignment="Center" HorizontalAlignment="Left" Visibility="{TemplateBinding ASUTextContentVisible}" x:Name="ASUTextContentPresenter" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTextContent}" Margin="{TemplateBinding ASUMarginText}" TextAlignment="Center" TextWrapping="Wrap" />
                        </Canvas>

                        <Grid Grid.Row="2" Grid.Column="2" VerticalAlignment="Center" HorizontalAlignment="Center" >
                            <ToolTipService.ToolTip>
                                <StackPanel>
                                    <Border Grid.Row="2" Grid.Column="2" Width="85" Height="40" Visibility="{TemplateBinding ASUBanner5Visibility}" Margin="5"  BorderBrush="Black" BorderThickness="1" CornerRadius="1">
                                        <Border BorderBrush="#3475cd" BorderThickness="3" CornerRadius="1">
                                            <Border BorderBrush="Black" BorderThickness="1" CornerRadius="1" Background="White">
                                                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                                    <TextBlock Width="75" FontSize="9" VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="Black" Text="Транзит разомкнут" TextAlignment="Center" TextWrapping="Wrap" FontWeight="Bold" />
                                                </StackPanel>
                                            </Border>
                                        </Border>
                                    </Border>

                                    <Border Grid.Row="2" Grid.Column="2" Width="85" Height="40" Visibility="{TemplateBinding ASUBanner4Visibility}" Margin="5"  BorderBrush="Black" BorderThickness="1" CornerRadius="1">
                                        <Border BorderBrush="Red" BorderThickness="3" CornerRadius="1">
                                            <Border BorderBrush="Black" BorderThickness="1" CornerRadius="1" Background="White">
                                                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                                    <TextBlock Width="75" FontSize="8" VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="Red" Text="Работа под напряжением" TextAlignment="Center" TextWrapping="Wrap" FontWeight="Bold"/>
                                                    <TextBlock FontSize="5" VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="Red" Text="повторно не включать" TextAlignment="Center" TextWrapping="NoWrap" FontWeight="Bold"/>
                                                </StackPanel>
                                            </Border>
                                        </Border>
                                    </Border>

                                    <Border Grid.Row="2" Grid.Column="2" Width="85" Height="40" Visibility="{TemplateBinding ASUBanner3Visibility}" Margin="5"  BorderBrush="Black" BorderThickness="1" CornerRadius="1">
                                        <Border Background="#3475cd" BorderBrush="#3475cd" BorderThickness="1" CornerRadius="1">
                                            <TextBlock FontSize="10" VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="White" Text="Заземлено" TextAlignment="Center" TextWrapping="Wrap" FontWeight="Bold"/>
                                        </Border>
                                    </Border>

                                    <Border Grid.Row="2" Grid.Column="2" Width="85" Height="40" Visibility="{TemplateBinding ASUBanner2Visibility}" Margin="5"  BorderBrush="Black" BorderThickness="1" CornerRadius="1">
                                        <Border BorderBrush="Red" BorderThickness="3" CornerRadius="1">
                                            <Border BorderBrush="Black" BorderThickness="1" CornerRadius="1" Background="White">
                                                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                                    <TextBlock FontSize="8" VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="Red" Text="НЕ ВКЛЮЧАТЬ!" TextAlignment="Center" TextWrapping="NoWrap" FontWeight="Bold"/>
                                                    <TextBlock FontSize="7" VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="Red" Text="Работают люди" TextAlignment="Center" TextWrapping="NoWrap" FontWeight="Bold"/>
                                                </StackPanel>
                                            </Border>
                                        </Border>
                                    </Border>

                                    <Border Grid.Row="2" Grid.Column="2" Width="85" Height="40" Visibility="{TemplateBinding ASUBanner1Visibility}" Margin="5"  BorderBrush="Black" BorderThickness="1" CornerRadius="1">
                                        <Border Background="Red" BorderBrush="Red" BorderThickness="1" CornerRadius="1">
                                            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                                <TextBlock FontSize="8" VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="White" Text="НЕ ВКЛЮЧАТЬ!" TextAlignment="Center" TextWrapping="NoWrap" FontWeight="Bold"/>
                                                <TextBlock FontSize="7" VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="White" Text="Работа на линии" TextAlignment="Center" TextWrapping="NoWrap" FontWeight="Bold"/>
                                            </StackPanel>
                                        </Border>
                                    </Border>
                                </StackPanel>
                            </ToolTipService.ToolTip>
                            <Border Grid.Row="2" Grid.Column="2" Width="85" Height="40" x:Name="Banner5" Visibility="{TemplateBinding ASUBanner5Visibility}" Margin="-40,-30,0,0"  BorderBrush="Black" BorderThickness="1" CornerRadius="1">
                                <Border BorderBrush="#3475cd" BorderThickness="3" CornerRadius="1">
                                    <Border BorderBrush="Black" BorderThickness="1" CornerRadius="1" Background="White">
                                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                            <TextBlock Width="75" FontSize="9" VerticalAlignment="Center" HorizontalAlignment="Center" x:Name="Banner1Text" Foreground="Black" Text="Транзит разомкнут" TextAlignment="Center" TextWrapping="Wrap" FontWeight="Bold" />
                                        </StackPanel>
                                    </Border>
                                </Border>
                            </Border>

                            <Border Grid.Row="2" Grid.Column="2" Width="85" Height="40" x:Name="Banner4" Visibility="{TemplateBinding ASUBanner4Visibility}" Margin="-37,-27,0,0"  BorderBrush="Black" BorderThickness="1" CornerRadius="1">
                                <Border BorderBrush="Red" BorderThickness="3" CornerRadius="1">
                                    <Border BorderBrush="Black" BorderThickness="1" CornerRadius="1" Background="White">
                                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                            <TextBlock Width="75" FontSize="8" VerticalAlignment="Center" HorizontalAlignment="Center" x:Name="Banner2Text" Foreground="Red" Text="Работа под напряжением" TextAlignment="Center" TextWrapping="Wrap" FontWeight="Bold"/>
                                            <TextBlock FontSize="5" VerticalAlignment="Center" HorizontalAlignment="Center" x:Name="Banner21Text" Foreground="Red" Text="повторно не включать" TextAlignment="Center" TextWrapping="NoWrap" FontWeight="Bold"/>
                                        </StackPanel>
                                    </Border>
                                </Border>
                            </Border>

                            <Border Grid.Row="2" Grid.Column="2" Width="85" Height="40" x:Name="Banner3" Visibility="{TemplateBinding ASUBanner3Visibility}" Margin="-34,-24,0,0" BorderBrush="Black" BorderThickness="1" CornerRadius="1">
                                <Border Background="#3475cd" BorderBrush="#3475cd" BorderThickness="1" CornerRadius="1">
                                    <TextBlock FontSize="10" VerticalAlignment="Center" HorizontalAlignment="Center" x:Name="Banner3Text" Foreground="White" Text="Заземлено" TextAlignment="Center" TextWrapping="Wrap" FontWeight="Bold"/>
                                </Border>
                            </Border>

                            <Border Grid.Row="2" Grid.Column="2" Width="85" Height="40" x:Name="Banner2" Visibility="{TemplateBinding ASUBanner2Visibility}" Margin="-31,-21,0,0" BorderBrush="Black" BorderThickness="1" CornerRadius="1">
                                <Border BorderBrush="Red" BorderThickness="3" CornerRadius="1">
                                    <Border BorderBrush="Black" BorderThickness="1" CornerRadius="1" Background="White">
                                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                            <TextBlock FontSize="8" VerticalAlignment="Center" HorizontalAlignment="Center" x:Name="Banner4Text" Foreground="Red" Text="НЕ ВКЛЮЧАТЬ!" TextAlignment="Center" TextWrapping="NoWrap" FontWeight="Bold"/>
                                            <TextBlock FontSize="7" VerticalAlignment="Center" HorizontalAlignment="Center" x:Name="Banner41Text" Foreground="Red" Text="Работают люди" TextAlignment="Center" TextWrapping="NoWrap" FontWeight="Bold"/>
                                        </StackPanel>
                                    </Border>
                                </Border>
                            </Border>

                            <Border Grid.Row="2" Grid.Column="2" Width="85" Height="40" x:Name="Banner1" Visibility="{TemplateBinding ASUBanner1Visibility}" Margin="-28,-18,0,0"  BorderBrush="Black" BorderThickness="1" CornerRadius="1">
                                <Border Background="Red" BorderBrush="Red" BorderThickness="1" CornerRadius="1">
                                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                        <TextBlock FontSize="8" VerticalAlignment="Center" HorizontalAlignment="Center" x:Name="Banner5Text" Foreground="White" Text="НЕ ВКЛЮЧАТЬ!" TextAlignment="Center" TextWrapping="NoWrap" FontWeight="Bold"/>
                                        <TextBlock FontSize="7" VerticalAlignment="Center" HorizontalAlignment="Center" x:Name="Banner51Text" Foreground="White" Text="Работа на линии" TextAlignment="Center" TextWrapping="NoWrap" FontWeight="Bold"/>
                                    </StackPanel>
                                </Border>
                            </Border>
                        </Grid>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CIsolatingSwitch">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CIsolatingSwitch">
                    <Grid Height="90" Width="180" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30" />
                            <RowDefinition Height="30"/>
                            <RowDefinition Height="30"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>

                        <VisualStateManager.VisualStateGroups>

                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter2"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">

                                <VisualState x:Name="VisualStateOn">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="On"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Off"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOn"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOff"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefined"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefinedQuestion"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkSwitch"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body2"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateOff">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="On"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Off"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOn"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOff"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefined"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefinedQuestion"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkSwitch"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body2"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOn">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="On"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Off"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOn" RepeatBehavior="Forever"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOff"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefined"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefinedQuestion"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkSwitch"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body2"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOff">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="On"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Off"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOn"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOff" RepeatBehavior="Forever"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefined"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefinedQuestion"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkSwitch"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body2"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateBroken">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="On"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Off"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOn"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOff"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefined"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefinedQuestion"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkSwitch"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body2"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateUnDefined">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="On"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Off"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOn"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOff"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefined"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefinedQuestion"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkSwitch"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body2"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateManualPE">
                                    <!--РєР°Рє VisualStateUnDefined-->
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="On"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Off"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOn"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOff"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefined"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefinedQuestion"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkSwitch"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body2"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateOutOfWork">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="On"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Off"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOn"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOff"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefined"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefinedQuestion"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkSwitch"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body2"/>
                                    </Storyboard>
                                </VisualState>






                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BorderLocalControlBlock"/>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BorderLocalControlUnBlock"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="LocalControlBlock">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BorderLocalControlBlock"/>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BorderLocalControlUnBlock"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="LocalControlUnBlock">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BorderLocalControlBlock"/>
                                        <DoubleAnimation Duration="0:0:0.5" AutoReverse="True" RepeatBehavior="Forever" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BorderLocalControlUnBlock"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid x:Name="RootGrid" local:CBaseControl.AttachedASUAngle="{TemplateBinding ASUAngle}" Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" Width="30" Height="30" RenderTransformOrigin="0.5,0.5">

                            <Canvas Width="28" Height="28" x:Name="RootCanvas" >
                                <!--Background="#FF505050"-->
                                <Path Opacity="1" x:Name="LeftConnector" Canvas.Left="0" Canvas.Top="0" Data="M-16,14 2,14" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1"/>
                                <Path Opacity="1" x:Name="RightConnector" Canvas.Left="0" Canvas.Top="0" Data="M25,14 44,14" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1"/>

                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" Data="M2,5 v18" x:Name="Body1"/>
                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" Data="M26,5 v18" x:Name="Body2"/>

                                <Path Opacity="0" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" Data="M5,14 h18 " x:Name="On" />
                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" Data="M14,2 v24" x:Name="Off"/>
                                <Path Opacity="0" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" Data="M3,2 25,26" x:Name="TurningOn"/>
                                <Path Opacity="0" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" Data="M3,2 25,26"  x:Name="TurningOff"/>
                                <Path Opacity="0" Canvas.Left="0" Canvas.Top="0" Stroke="Red" StrokeThickness="3" Data="M28,0 0,28" x:Name="Broken" />

                                <Path Opacity="0" Canvas.Left="0" Canvas.Top="0" Stroke="#FFCDFF9B" StrokeThickness="3" Data="M2,5 v18" x:Name="OutOfWorkBody1"/>
                                <Path Opacity="0" Canvas.Left="0" Canvas.Top="0" Stroke="#FFCDFF9B" StrokeThickness="3" Data="M26,5 v18" x:Name="OutOfWorkBody2"/>
                                <Path Opacity="0" Canvas.Left="0" Canvas.Top="0" Stroke="#FFCDFF9B" StrokeThickness="3" Data="M14,2 v24" x:Name="OutOfWorkSwitch"/>

                                <Rectangle Opacity="0" x:Name="UnDefined" Fill="LightGray"  StrokeThickness="1" Width="20" Height="22" Canvas.Left="4" Canvas.Top="3"/>

                                <Border Opacity="0" Background="LightYellow" BorderThickness="2" BorderBrush="Yellow" CornerRadius="1" Grid.Row="1" Grid.Column="1" x:Name="BorderLocalControlBlock" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" />
                                <Border Opacity="0" Background="LightPink" BorderThickness="2" BorderBrush="Red" CornerRadius="1" Grid.Row="1" Grid.Column="1" x:Name="BorderLocalControlUnBlock" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}"  />

                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black"  />
                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />

                            </Canvas>

                        </Grid>
                        <TextBlock Opacity="0" x:Name="UnDefinedQuestion" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="16" FontWeight="Bold" Foreground="{TemplateBinding ASUVoltageColor}"><Run Text="?"/></TextBlock>

                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowContent}" Grid.Column="{TemplateBinding ASUGridColumnContent}"  x:Name="contentPresenter2" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Margin="{TemplateBinding ASUMarginContent}" Opacity="1"/>
                        <Canvas Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowASUTextContent}" Grid.Column="{TemplateBinding ASUGridColumnASUTextContent}" >
                            <TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Height="Auto" Width="{TemplateBinding ASUTextContentWidth}" VerticalAlignment="Center" HorizontalAlignment="Left" Visibility="{TemplateBinding ASUTextContentVisible}" x:Name="ASUTextContentPresenter" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTextContent}" Margin="{TemplateBinding ASUMarginText}" TextAlignment="Center" TextWrapping="Wrap" />
                        </Canvas>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CPESwitch">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CPESwitch">
                    <Grid Height="90" Width="180" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30" />
                            <RowDefinition Height="30"/>
                            <RowDefinition Height="30"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>

                        <VisualStateManager.VisualStateGroups>

                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter3"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">
                                <VisualState x:Name="VisualStateOn">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="On"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Off"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOn"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOff"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefined"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefinedQuestion"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkSwitch"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="ManualPE"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="ManualPENumberTB"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateOff">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="On"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Off"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOn"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOff"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefined"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefinedQuestion"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkSwitch"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="ManualPE"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="ManualPENumberTB"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOn">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="On"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Off"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOn" RepeatBehavior="Forever"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOff"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefined"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefinedQuestion"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkSwitch"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="ManualPE"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="ManualPENumberTB"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOff">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="On"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Off"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOn"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOff" RepeatBehavior="Forever"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefined"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefinedQuestion"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkSwitch"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="ManualPE"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="ManualPENumberTB"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateBroken">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="On"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Off"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOn"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOff"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefined"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefinedQuestion"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkSwitch"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="ManualPE"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="ManualPENumberTB"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateUnDefined">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="On"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Off"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOn"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOff"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefined"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefinedQuestion"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkSwitch"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="ManualPE"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="ManualPENumberTB"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateManualPE">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="On"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Off"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOn"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOff"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefined"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefinedQuestion"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkSwitch"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="ManualPE"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="ManualPENumberTB"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateOutOfWork">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="On"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Off"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOn"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="TurningOff"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefined"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnDefinedQuestion"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkSwitch"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Body2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="ManualPE"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="ManualPENumberTB"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BorderLocalControlBlock"/>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BorderLocalControlUnBlock"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="LocalControlBlock">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BorderLocalControlBlock"/>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BorderLocalControlUnBlock"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="LocalControlUnBlock">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BorderLocalControlBlock"/>
                                        <DoubleAnimation Duration="0:0:0.5" AutoReverse="True" RepeatBehavior="Forever" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BorderLocalControlUnBlock"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid x:Name="RootGrid" local:CBaseControl.AttachedASUAngle="{TemplateBinding ASUAngle}" Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" Width="30" Height="30" RenderTransformOrigin="0.5,0.5">

                            <Canvas Width="28" Height="28" x:Name="RootCanvas" >
                                <!--Background="#FF505050"-->
                                <Path Opacity="1" x:Name="LeftConnector" Canvas.Left="0" Canvas.Top="0" Data="M-16,14 2,14" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1"/>

                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" Data="M2,5 v18" x:Name="Body1"/>
                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" x:Name="Body2" Data="M26,5 v18" />
                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" x:Name="Body3" Data="M35,2 v24"/>
                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" x:Name="Body4" Data="M40,5 v18"/>
                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" x:Name="Body5" Data="M45,8 v12"/>
                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" x:Name="Body6" Data="M27,14 h7 "/>

                                <Path Opacity="0" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" Data="M5,14 h18 " x:Name="On" />
                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" Data="M14,2 v24" x:Name="Off"/>
                                <Path Opacity="0" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" Data="M3,2 25,26" x:Name="TurningOn"/>
                                <Path Opacity="0" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" Data="M3,2 25,26"  x:Name="TurningOff"/>
                                <Path Opacity="0" Canvas.Left="0" Canvas.Top="0" Stroke="Red" StrokeThickness="3" Data="M28,0 0,28" x:Name="Broken" />

                                <Path Opacity="0" Canvas.Left="0" Canvas.Top="0" Stroke="#FFCDFF9B" StrokeThickness="3" Data="M2,5 v18" x:Name="OutOfWorkBody1"/>
                                <Path Opacity="0" Canvas.Left="0" Canvas.Top="0" Stroke="#FFCDFF9B" StrokeThickness="3" Data="M26,5 v18" x:Name="OutOfWorkBody2"/>
                                <Path Opacity="0" Canvas.Left="0" Canvas.Top="0" Stroke="#FFCDFF9B" StrokeThickness="3" Data="M14,2 v24" x:Name="OutOfWorkSwitch"/>

                                <Rectangle Opacity="0" x:Name="UnDefined" Fill="LightGray"  StrokeThickness="1" Width="20" Height="22" Canvas.Left="4" Canvas.Top="3"/>
                                <Rectangle Opacity="0" x:Name="ManualPE" Fill="#FF968C55"  StrokeThickness="1" Width="20" Height="22" Canvas.Left="4" Canvas.Top="3"/>

                                <Border Opacity="0" Background="LightYellow" BorderThickness="2" BorderBrush="Yellow" CornerRadius="1" Grid.Row="1" Grid.Column="1" x:Name="BorderLocalControlBlock" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" />
                                <Border Opacity="0" Background="LightPink" BorderThickness="2" BorderBrush="Red" CornerRadius="1" Grid.Row="1" Grid.Column="1" x:Name="BorderLocalControlUnBlock" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}"  />

                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black"  />
                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />

                            </Canvas>
                        </Grid>
                        <TextBlock Opacity="0" x:Name="UnDefinedQuestion" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="16" FontWeight="Bold" Foreground="{TemplateBinding ASUVoltageColor}"><Run Text="?"/></TextBlock>
                        <TextBlock Opacity="0" x:Name="ManualPENumberTB" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="10" Foreground="Black"  Text="{TemplateBinding ASUManualPENumber}"/>

                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowContent}" Grid.Column="{TemplateBinding ASUGridColumnContent}"  x:Name="contentPresenter3" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Margin="{TemplateBinding ASUMarginContent}" Opacity="1"/>
                        <Canvas Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowASUTextContent}" Grid.Column="{TemplateBinding ASUGridColumnASUTextContent}" >
                            <TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Height="Auto" Width="{TemplateBinding ASUTextContentWidth}" VerticalAlignment="Center" HorizontalAlignment="Left" Visibility="{TemplateBinding ASUTextContentVisible}" x:Name="ASUTextContentPresenter" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTextContent}" Margin="{TemplateBinding ASUMarginText}" TextAlignment="Center" TextWrapping="Wrap" />
                        </Canvas>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CTransformerCoil">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CTransformerCoil">
                    <Grid Height="90" Width="180" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30" />
                            <RowDefinition Height="30"/>
                            <RowDefinition Height="30"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>

                        <VisualStateManager.VisualStateGroups>

                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter4"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">

                                <VisualState x:Name="VisualStateOn">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateOff">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOn">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOff">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateBroken">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateUnDefined">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateManualPE">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateOutOfWork">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl"/>
                                <VisualState x:Name="LocalControlBlock"/>
                                <VisualState x:Name="LocalControlUnBlock"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid x:Name="RootGrid" local:CBaseControl.AttachedASUAngle="{TemplateBinding ASUAngle}" Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" Width="30" Height="30" RenderTransformOrigin="0.5,0.5">

                            <Canvas Width="28" Height="28" x:Name="RootCanvas" >
                                <!--Background="#FF505050"-->

                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilLeftExitVisibility}" x:Name="LeftConnector" Data="M-6,14 5,14" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilTopExitVisibility}" x:Name="TopConnector" Data="M24,-16 24,-5" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilRightExitVisibility}" x:Name="RightConnector" Data="M43,14 54,14" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilBottomExitVisibility}" x:Name="BottomConnector" Data="M24,33 24,44" StrokeThickness="1" Margin="-10,0,0,0"/>

                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0"  Visibility="{TemplateBinding ASUDeltaConnectionVisibility}" x:Name="DeltaConnection" Data="M15,20 33,20 24,5 15,20 32,20" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0"  Visibility="{TemplateBinding ASUVConnectionVisibility}" x:Name="VConnection" Data="M30,20 33,20 24,5 15,20 18,20" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0"  Visibility="{TemplateBinding ASUStarConnectionVisibility}" x:Name="StarConnection" Data="M33,8 24,14 24,20 24,14 14,8 " StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0"  Visibility="{TemplateBinding ASUPEConnectionVisibility}" x:Name="PEConnection" Data="M24,14 35,14" StrokeThickness="1" Margin="-10,0,0,0"/>


                                <Ellipse Width="40" Height="40" Margin="-6,-6,0,0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" />
                                <Ellipse  Opacity="0" Width="40" Height="40" Margin="-6,-6,0,0" Stroke="#FFCDFF9B" StrokeThickness="3" x:Name="OutOfWorkBody"/>
                                <!--
                                <ed:LineArrow Stroke="{TemplateBinding ASUAutoVoltageColor}" Visibility="{TemplateBinding ASUAutoVisibility}" StrokeThickness="3" Width="22" Height="31" Margin="12,-19,0,0" EndArrow="NoArrow" StartCorner="TopLeft" BendAmount="0.6" x:Name="AutoTransformer"/>
                                <ed:LineArrow Stroke="{TemplateBinding ASUVoltageColor}" Visibility="{TemplateBinding ASURPNVisibility}" StrokeThickness="3" Width="60" Height="60" Margin="-15,-20,0,0" Grid.Row="2" StartCorner="BottomLeft"  BendAmount="0" x:Name="RPN"/>
 -->
                                <Path Stroke="{TemplateBinding ASUAutoVoltageColor}"  Visibility="{TemplateBinding ASUAutoVisibility}" x:Name="AutoTransformer" Canvas.Left="0" Canvas.Top="0" Data="M32,10 C32,-5 20,-19 14,-17" StrokeThickness="3" Margin="0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}"  Visibility="{TemplateBinding ASURPNVisibility}" x:Name="RPN" Canvas.Left="0" Canvas.Top="0" Data="M-10,40 L35,-17 L33,-18 L38,-20 L37,-15 L35,-17 z" StrokeThickness="3" Margin="0"/>


                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black"  />
                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />

                            </Canvas>

                        </Grid>

                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowContent}" Grid.Column="{TemplateBinding ASUGridColumnContent}"  x:Name="contentPresenter4" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Margin="{TemplateBinding ASUMarginContent}" Opacity="1"/>
                        <Canvas Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowASUTextContent}" Grid.Column="{TemplateBinding ASUGridColumnASUTextContent}" >
                            <TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Height="Auto" Width="{TemplateBinding ASUTextContentWidth}" VerticalAlignment="Center" HorizontalAlignment="Left" Visibility="{TemplateBinding ASUTextContentVisible}" x:Name="ASUTextContentPresenter" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTextContent}" Margin="{TemplateBinding ASUMarginText}" TextAlignment="Center" TextWrapping="Wrap" />
                        </Canvas>

                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CTransformer2Coils">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CTransformer2Coils">
                    <Grid Height="120" Width="180" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30" />
                            <RowDefinition Height="60"/>
                            <RowDefinition Height="30"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>

                        <VisualStateManager.VisualStateGroups>

                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter5"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">
                                <VisualState x:Name="VisualStateOn">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateOff">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOn">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOff">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateBroken">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateUnDefined">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateManualPE">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateOutOfWork">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                    </Storyboard>
                                </VisualState>

                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl"/>
                                <VisualState x:Name="LocalControlBlock"/>
                                <VisualState x:Name="LocalControlUnBlock"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid x:Name="RootGrid" local:CBaseControl.AttachedASUAngle="{TemplateBinding ASUAngle}" Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" Width="30" Height="60" RenderTransformOrigin="0.5,0.5">

                            <Canvas Width="28" Height="58" x:Name="RootCanvas" >
                                <!--Background="#FF505050"-->

                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilLeftExitVisibility}" x:Name="LeftConnector" Data="M-6,14 5,14" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilTopExitVisibility}" x:Name="TopConnector" Data="M24,-16 24,-5" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilRightExitVisibility}" x:Name="RightConnector" Data="M43,14 54,14" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilBottomExitVisibility}" x:Name="BottomConnector" Data="M24,33 24,44" StrokeThickness="1" Margin="-10,0,0,0"/>

                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0"  Visibility="{TemplateBinding ASUDeltaConnectionVisibility}" x:Name="DeltaConnection" Data="M15,20 33,20 24,5 15,20 32,20" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0"  Visibility="{TemplateBinding ASUVConnectionVisibility}" x:Name="VConnection" Data="M30,20 33,20 24,5 15,20 18,20" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0"  Visibility="{TemplateBinding ASUStarConnectionVisibility}" x:Name="StarConnection" Data="M33,8 24,14 24,20 24,14 14,8 " StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0"  Visibility="{TemplateBinding ASUPEConnectionVisibility}" x:Name="PEConnection" Data="M24,14 35,14" StrokeThickness="1" Margin="-10,0,0,0"/>

                                <Ellipse Width="40" Height="40" Margin="-6,-6,0,0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" />
                                <Ellipse  Opacity="0" Width="40" Height="40" Margin="-6,-6,0,0" Stroke="#FFCDFF9B" StrokeThickness="3" x:Name="OutOfWorkBody1"/>
                                <!--
                                <ed:LineArrow Stroke="{TemplateBinding ASUAutoVoltageColor}" Visibility="{TemplateBinding ASUAutoVisibility}" StrokeThickness="3"  Width="22" Height="31" Margin="12,-19,0,0" EndArrow="NoArrow" StartCorner="TopLeft" BendAmount="0.6" x:Name="AutoTransformer"/>
                                <ed:LineArrow Stroke="{TemplateBinding ASUVoltageColor}" Visibility="{TemplateBinding ASURPNVisibility}" StrokeThickness="3" Width="60" Height="60" Margin="-15,-20,0,0" Grid.Row="2" StartCorner="BottomLeft"  BendAmount="0" x:Name="RPN"/>
                               -->
                                <Path Stroke="{TemplateBinding ASUAutoVoltageColor}"  Visibility="{TemplateBinding ASUAutoVisibility}" x:Name="AutoTransformer" Canvas.Left="0" Canvas.Top="0" Data="M32,10 C32,-5 20,-19 14,-17" StrokeThickness="3" Margin="0"/>

                                <Path Stroke="{TemplateBinding ASUVoltageColor}"  Visibility="{TemplateBinding ASURPNVisibility}" x:Name="RPN" Canvas.Left="0" Canvas.Top="0" Data="M-10,40 L35,-17 L33,-18 L38,-20 L37,-15 L35,-17 z" StrokeThickness="3" Margin="0"/>

                                
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilLeftExitVisibility2}" x:Name="LeftConnector2" Data="M-6,44 5,44" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilTopExitVisibility2}" x:Name="TopConnector2" Data="M24,13 24, 25" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilRightExitVisibility2}" x:Name="RightConnector2" Data="M43,44 54,44" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilBottomExitVisibility2}" x:Name="BottomConnector2" Data="M24,63 24,74" StrokeThickness="1" Margin="-10,0,0,0"/>

                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUDeltaConnectionVisibility2}" x:Name="DeltaConnection2" Data="M15,50 33,50 24,35 15,50 32,50" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUVConnectionVisibility2}" x:Name="VConnection2" Data="M30,50 33,50 24,35 15,50 18,50" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUStarConnectionVisibility2}" x:Name="StarConnection2" Data="M33,38 24,44 24,50 24,44 14,38 " StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUPEConnectionVisibility2}" x:Name="PEConnection2" Data="M24,44 35,44" StrokeThickness="1" Margin="-10,0,0,0"/>

                                <Ellipse Width="40" Height="40" Margin="-6,24,0,0" Stroke="{TemplateBinding ASUVoltageColor2}" StrokeThickness="3" />
                                <Ellipse  Opacity="0" Width="40" Height="40" Margin="-6,24,0,0" Stroke="#FFCDFF9B" StrokeThickness="3" x:Name="OutOfWorkBody2"/>

                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black"  />
                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />

                            </Canvas>
                        </Grid>
                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowContent}" Grid.Column="{TemplateBinding ASUGridColumnContent}"  x:Name="contentPresenter5" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Margin="{TemplateBinding ASUMarginContent}" Opacity="1"/>
                        <Canvas Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowASUTextContent}" Grid.Column="{TemplateBinding ASUGridColumnASUTextContent}" >
                            <TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Height="Auto" Width="{TemplateBinding ASUTextContentWidth}" VerticalAlignment="Center" HorizontalAlignment="Left" Visibility="{TemplateBinding ASUTextContentVisible}" x:Name="ASUTextContentPresenter" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTextContent}" Margin="{TemplateBinding ASUMarginText}" TextAlignment="Center" TextWrapping="Wrap" />
                        </Canvas>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CTransformer3CoilsV1">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CTransformer3CoilsV1">
                    <Grid Height="120" Width="195" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30" />
                            <RowDefinition Height="60"/>
                            <RowDefinition Height="30"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="75"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>

                        <VisualStateManager.VisualStateGroups>

                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter6"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">
                                <VisualState x:Name="VisualStateOn">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateOff">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOn">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOff">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateBroken">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateUnDefined">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateManualPE">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateOutOfWork">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody3"/>
                                    </Storyboard>
                                </VisualState>

                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl"/>
                                <VisualState x:Name="LocalControlBlock"/>
                                <VisualState x:Name="LocalControlUnBlock"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid x:Name="RootGrid" local:CBaseControl.AttachedASUAngle="{TemplateBinding ASUAngle}" Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" Width="60" Height="60" RenderTransformOrigin="0.5,0.5">

                            <Canvas Width="60" Height="60" x:Name="RootCanvas" >
                                <!--Background="#FF505050"-->

                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilLeftExitVisibility}" x:Name="LeftConnector" Data="M-5,15 7,15" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilTopExitVisibility}" x:Name="TopConnector" Data="M25,-15 25,-5" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilRightExitVisibility}" x:Name="RightConnector" Data="M41,15 55,15" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilBottomExitVisibility}" x:Name="BottomConnector" Data="M26,33 26,44" StrokeThickness="1" Margin="-10,0,0,0"/>

                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUDeltaConnectionVisibility}"  x:Name="DeltaConnection" Data="M17,20 35,20 26,5 17,20 34,20" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUVConnectionVisibility}"  x:Name="VConnection" Data="M32,20 35,20 26,5 17,20 20,20" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUStarConnectionVisibility}"  x:Name="StarConnection" Data="M35,8 26,14 26,20 26,14 16,8 " StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUPEConnectionVisibility}"  x:Name="PEConnection" Data="M26,14 37,14" StrokeThickness="1" Margin="-10,0,0,0"/>

                                <Ellipse Width="40" Height="40" Margin="-4,-6,0,0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" />
                                <Ellipse  Opacity="0" Width="40" Height="40" Margin="-4,-6,0,0" Stroke="#FFCDFF9B" StrokeThickness="3" x:Name="OutOfWorkBody1"/>
 <!--
                                <ed:LineArrow Stroke="{TemplateBinding ASUAutoVoltageColor}" Visibility="{TemplateBinding ASUAutoVisibility}" StrokeThickness="3"  Width="23" Height="31" Margin="13,-17,0,0" EndArrow="NoArrow" StartCorner="TopLeft" BendAmount="0.6" x:Name="AutoTransformer"/>
                                <ed:LineArrow Stroke="{TemplateBinding ASUVoltageColor}" Visibility="{TemplateBinding ASURPNVisibility}" StrokeThickness="3" Width="60" Height="60" Margin="-15,-20,0,0" Grid.Row="2" StartCorner="BottomLeft"  BendAmount="0" x:Name="RPN"/>

                              -->
                                <Path Stroke="{TemplateBinding ASUAutoVoltageColor}"  Visibility="{TemplateBinding ASUAutoVisibility}" x:Name="AutoTransformer" Canvas.Left="0" Canvas.Top="0" Data="M32,10 C32,-5 20,-19 13,-17" StrokeThickness="3" Margin="2,1,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}"  Visibility="{TemplateBinding ASURPNVisibility}" x:Name="RPN" Canvas.Left="0" Canvas.Top="0" Data="M-10,40 L35,-17 L33,-18 L38,-20 L37,-15 L35,-17 z" StrokeThickness="3" Margin="0"/>


                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilLeftExitVisibility2}" x:Name="LeftConnector2" Data="M-5,45 7,45" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilTopExitVisibility2}" x:Name="TopConnector2" Data="M25,14 25, 26" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilRightExitVisibility2}" x:Name="RightConnector2" Data="M42,45 57,45" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilBottomExitVisibility2}" x:Name="BottomConnector2" Data="M25,64 25,75" StrokeThickness="1" Margin="-10,0,0,0"/>

                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUDeltaConnectionVisibility2}" x:Name="DeltaConnection2" Data="M17,50 35,50 26,35 17,50 33,50" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUVConnectionVisibility2}" x:Name="VConnection2" Data="M32,50 35,50 26,35 17,50 20,50" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUStarConnectionVisibility2}" x:Name="StarConnection2" Data="M35,38 26,44 26,50 26,44 16,38 " StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUPEConnectionVisibility2}" x:Name="PEConnection2" Data="M26,44 37,44" StrokeThickness="1" Margin="-10,0,0,0"/>

                                <Ellipse Width="40" Height="40" Margin="-4,25,0,0" Stroke="{TemplateBinding ASUVoltageColor2}" StrokeThickness="3" />
                                <Ellipse  Opacity="0" Width="40" Height="40" Margin="-4,25,0,0" Stroke="#FFCDFF9B" StrokeThickness="3" x:Name="OutOfWorkBody2"/>


                                <Path Stroke="{TemplateBinding ASUVoltageColor3}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilLeftExitVisibility3}" x:Name="LeftConnector3" Data="M26,30 34,30" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor3}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilTopExitVisibility3}" x:Name="TopConnector3" Data="M55,-15 55, 9" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor3}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilRightExitVisibility3}" x:Name="RightConnector3" Data="M72,30 85,30" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor3}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilBottomExitVisibility3}" x:Name="BottomConnector3" Data="M55,49 55,75" StrokeThickness="1" Margin="-10,0,0,0"/>

                                <Path Stroke="{TemplateBinding ASUVoltageColor3}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUDeltaConnectionVisibility3}" x:Name="DeltaConnection3" Data="M44,34 62,34 53,19 44,34 62,34" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor3}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUVConnectionVisibility3}" x:Name="VConnection3" Data="M59,34 62,34 53,19 44,34 47,34" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor3}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUStarConnectionVisibility3}" x:Name="StarConnection3" Data="M62,22 53,28 53,34 53,28 43,22 " StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor3}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUPEConnectionVisibility3}" x:Name="PEConnection3" Data="M53,28 64,28" StrokeThickness="1" Margin="-10,0,0,0"/>

                                <Ellipse Width="40" Height="40" Margin="23,9,0,0" Stroke="{TemplateBinding ASUVoltageColor3}" StrokeThickness="3" />
                                <Ellipse  Opacity="0" Width="40" Height="40" Margin="23,9,0,0" Stroke="#FFCDFF9B" StrokeThickness="3" x:Name="OutOfWorkBody3"/>

                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black"  />
                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />

                            </Canvas>
                        </Grid>
                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowContent}" Grid.Column="{TemplateBinding ASUGridColumnContent}"  x:Name="contentPresenter6" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Margin="{TemplateBinding ASUMarginContent}" Opacity="1"/>
                        <Canvas Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowASUTextContent}" Grid.Column="{TemplateBinding ASUGridColumnASUTextContent}" >
                            <TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Height="Auto" Width="{TemplateBinding ASUTextContentWidth}" VerticalAlignment="Center" HorizontalAlignment="Left" Visibility="{TemplateBinding ASUTextContentVisible}" x:Name="ASUTextContentPresenter" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTextContent}" Margin="{TemplateBinding ASUMarginText}" TextAlignment="Center" TextWrapping="Wrap" />
                        </Canvas>

                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CTransformer3CoilsV1Left">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CTransformer3CoilsV1Left">
                    <Grid Height="120" Width="195" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30" />
                            <RowDefinition Height="60"/>
                            <RowDefinition Height="30"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="75"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>

                        <VisualStateManager.VisualStateGroups>

                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter6"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">
                                <VisualState x:Name="VisualStateOn">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateOff">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOn">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOff">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateBroken">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateUnDefined">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateManualPE">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateOutOfWork">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody3"/>
                                    </Storyboard>
                                </VisualState>

                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl"/>
                                <VisualState x:Name="LocalControlBlock"/>
                                <VisualState x:Name="LocalControlUnBlock"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid x:Name="RootGrid" local:CBaseControl.AttachedASUAngle="{TemplateBinding ASUAngle}" Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" Width="60" Height="60" RenderTransformOrigin="0.5,0.5">

                            <Canvas Width="60" Height="60" x:Name="RootCanvas" >
                                <!--Background="#FF505050"-->

                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilLeftExitVisibility}" x:Name="LeftConnector" Data="M26,15 34,15" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilTopExitVisibility}" x:Name="TopConnector" Data="M55,-15 55,-5" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilRightExitVisibility}" x:Name="RightConnector" Data="M72,15 85,15" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilBottomExitVisibility}" x:Name="BottomConnector" Data="M55,33 55,44" StrokeThickness="1" Margin="-10,0,0,0"/>

                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUDeltaConnectionVisibility}"  x:Name="DeltaConnection" Data="M44,20 62,20 53,5 44,20 62,20" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUVConnectionVisibility}"  x:Name="VConnection" Data="M59,20 62,20 53,5 44,20 47,20" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUStarConnectionVisibility}"  x:Name="StarConnection" Data="M62,8 53,14 53,20 53,14 43,8 " StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUPEConnectionVisibility}"  x:Name="PEConnection" Data="M53,14 62,14" StrokeThickness="1" Margin="-10,0,0,0"/>

                                <Ellipse Width="40" Height="40" Margin="23,-6,0,0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" />
                                <Ellipse  Opacity="0" Width="40" Height="40" Margin="23,-6,0,0" Stroke="#FFCDFF9B" StrokeThickness="3" x:Name="OutOfWorkBody1"/>
                                <!-- 
                                <ed:LineArrow Stroke="{TemplateBinding ASUAutoVoltageColor}" Visibility="{TemplateBinding ASUAutoVisibility}" StrokeThickness="3"  Width="21" Height="31" Margin="42,-17,0,0" EndArrow="NoArrow" StartCorner="TopLeft" BendAmount="0.6" x:Name="AutoTransformer"/>
                                <ed:LineArrow Stroke="{TemplateBinding ASUVoltageColor}" Visibility="{TemplateBinding ASURPNVisibility}" StrokeThickness="3" Width="60" Height="60" Margin="15,-20,0,0" Grid.Row="2" StartCorner="BottomLeft"  BendAmount="0" x:Name="RPN"/>

                               -->
                                <Path Stroke="{TemplateBinding ASUAutoVoltageColor}"  Visibility="{TemplateBinding ASUAutoVisibility}" x:Name="AutoTransformer" Canvas.Left="0" Canvas.Top="0" Data="M32,10 C32,-5 20,-19 16,-16" StrokeThickness="3" Margin="29,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}"  Visibility="{TemplateBinding ASURPNVisibility}" x:Name="RPN" Canvas.Left="0" Canvas.Top="0" Data="M-20,50 L35,-17 L33,-18 L38,-20 L37,-15 L35,-17 z" StrokeThickness="3" Margin="29,0,0,0"/>


                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilLeftExitVisibility2}" x:Name="LeftConnector2" Data="M26,45 34,45" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilTopExitVisibility2}" x:Name="TopConnector2" Data="M55,14 55, 26" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilRightExitVisibility2}" x:Name="RightConnector2" Data="M72,45 85,45" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilBottomExitVisibility2}" x:Name="BottomConnector2" Data="M55,64 55,75" StrokeThickness="1" Margin="-10,0,0,0"/>

                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUDeltaConnectionVisibility2}" x:Name="DeltaConnection2" Data="M44,50 62,50 53,35 44,50 62,50" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUVConnectionVisibility2}" x:Name="VConnection2" Data="M59,50 62,50 53,35 44,50 47,50" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUStarConnectionVisibility2}" x:Name="StarConnection2" Data="M62,38 53,44 53,50 53,44 43,38 " StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUPEConnectionVisibility2}" x:Name="PEConnection2" Data="M53,44 62,44" StrokeThickness="1" Margin="-10,0,0,0"/>

                                <Ellipse Width="40" Height="40" Margin="23,25,0,0" Stroke="{TemplateBinding ASUVoltageColor2}" StrokeThickness="3" />
                                <Ellipse  Opacity="0" Width="40" Height="40" Margin="23,25,0,0" Stroke="#FFCDFF9B" StrokeThickness="3" x:Name="OutOfWorkBody2"/>


                                <Path Stroke="{TemplateBinding ASUVoltageColor3}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilLeftExitVisibility3}" x:Name="LeftConnector3" Data="M-5,30 7,30" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor3}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilTopExitVisibility3}" x:Name="TopConnector3" Data="M25,-15 25, 9" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor3}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilRightExitVisibility3}" x:Name="RightConnector3" Data="M42,30 55,30" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor3}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilBottomExitVisibility3}" x:Name="BottomConnector3" Data="M25,49 25,75" StrokeThickness="1" Margin="-10,0,0,0"/>

                                <Path Stroke="{TemplateBinding ASUVoltageColor3}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUDeltaConnectionVisibility3}" x:Name="DeltaConnection3" Data="M17,34 35,34 26,19 17,34 33,34" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor3}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUVConnectionVisibility3}" x:Name="VConnection3" Data="M32,34 35,34 26,19 17,34 20,34" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor3}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUStarConnectionVisibility3}" x:Name="StarConnection3" Data="M35,22 26,28 26,34 26,28 16,22 " StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor3}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUPEConnectionVisibility3}" x:Name="PEConnection3" Data="M26,28 37,28" StrokeThickness="1" Margin="-10,0,0,0"/>

                                <Ellipse Width="40" Height="40" Margin="-4,9,0,0" Stroke="{TemplateBinding ASUVoltageColor3}" StrokeThickness="3" />
                                <Ellipse  Opacity="0" Width="40" Height="40" Margin="-4,9,0,0" Stroke="#FFCDFF9B" StrokeThickness="3" x:Name="OutOfWorkBody3"/>

                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black"  />
                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />

                            </Canvas>
                        </Grid>
                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowContent}" Grid.Column="{TemplateBinding ASUGridColumnContent}"  x:Name="contentPresenter6" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Margin="{TemplateBinding ASUMarginContent}" Opacity="1"/>
                        <Canvas Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowASUTextContent}" Grid.Column="{TemplateBinding ASUGridColumnASUTextContent}" >
                            <TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Height="Auto" Width="{TemplateBinding ASUTextContentWidth}" VerticalAlignment="Center" HorizontalAlignment="Left" Visibility="{TemplateBinding ASUTextContentVisible}" x:Name="ASUTextContentPresenter" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTextContent}" Margin="{TemplateBinding ASUMarginText}" TextAlignment="Center" TextWrapping="Wrap" />
                        </Canvas>

                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CTransformer3CoilsV2">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CTransformer3CoilsV2">
                    <Grid Height="120" Width="180" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30" />
                            <RowDefinition Height="60"/>
                            <RowDefinition Height="30"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>

                        <VisualStateManager.VisualStateGroups>

                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter7"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">
                                <VisualState x:Name="VisualStateOn">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateOff">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOn">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOff">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateBroken">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateUnDefined">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateManualPE">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateOutOfWork">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWorkBody3"/>
                                    </Storyboard>
                                </VisualState>

                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl"/>
                                <VisualState x:Name="LocalControlBlock"/>
                                <VisualState x:Name="LocalControlUnBlock"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid x:Name="RootGrid" local:CBaseControl.AttachedASUAngle="{TemplateBinding ASUAngle}" Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" Width="60" Height="60" RenderTransformOrigin="0.5,0.5">

                            <Canvas Width="60" Height="60" x:Name="RootCanvas" >
                                <!--Background="#FF505050"-->

                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilLeftExitVisibility}" x:Name="LeftConnector" Data="M10,15 21,15" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilTopExitVisibility}" x:Name="TopConnector" Data="M40,-15 40,-5" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilRightExitVisibility}" x:Name="RightConnector" Data="M59,15 70,15" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilBottomExitVisibility}" x:Name="BottomConnector" Data="M40,34 40,45" StrokeThickness="1" Margin="-10,0,0,0"/>

                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUDeltaConnectionVisibility}" x:Name="DeltaConnection" Data="M31,21 49,21 40,6 31,21 40,21" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUVConnectionVisibility}" x:Name="VConnection" Data="M46,21 49,21 40,6 31,21 36,21" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUStarConnectionVisibility}" x:Name="StarConnection" Data="M49,9 40,15 40,21 40,15 30,9 " StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUPEConnectionVisibility}" x:Name="PEConnection" Data="M40,15 51,15" StrokeThickness="1" Margin="-10,0,0,0"/>

                                <Ellipse Width="40" Height="40" Margin="10,-5,0,0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" />
                                <Ellipse  Opacity="0" Width="40" Height="40" Margin="10,-5,0,0" Stroke="#FFCDFF9B" StrokeThickness="3" x:Name="OutOfWorkBody1"/>
   <!--
                                <ed:LineArrow Stroke="{TemplateBinding ASUAutoVoltageColor}" Visibility="{TemplateBinding ASUAutoVisibility}"  StrokeThickness="3"  Width="22" Height="31" Margin="28,-17,0,0" EndArrow="NoArrow" StartCorner="TopLeft" BendAmount="0.6" x:Name="AutoTransformer"/>
                                <ed:LineArrow Stroke="{TemplateBinding ASUVoltageColor}" Visibility="{TemplateBinding ASURPNVisibility}"  StrokeThickness="3" Width="60" Height="60" Margin="0,-20,0,0" Grid.Row="2" StartCorner="BottomLeft"  BendAmount="0" x:Name="RPN"/>
                             
                               -->
                                <Path Stroke="{TemplateBinding ASUAutoVoltageColor}"  Visibility="{TemplateBinding ASUAutoVisibility}" x:Name="AutoTransformer" Canvas.Left="0" Canvas.Top="0" Data="M32,10 C32,-5 20,-19 14,-16" StrokeThickness="3" Margin="16,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}"  Visibility="{TemplateBinding ASURPNVisibility}" x:Name="RPN" Canvas.Left="0" Canvas.Top="0" Data="M-20,50 L35,-17 L33,-18 L38,-20 L37,-15 L35,-17 z" StrokeThickness="3" Margin="16,0,0,0"/>

                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilLeftExitVisibility2}" x:Name="LeftConnector2" Data="M-20,45 7,45" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilTopExitVisibility2}" x:Name="TopConnector2" Data="M25,15 25,23" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilRightExitVisibility2}" x:Name="RightConnector2" Data="M45,45 60,45" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilBottomExitVisibility2}" x:Name="BottomConnector2" Data="M17,60 10,75" StrokeThickness="1" Margin="-10,0,0,0"/>

                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUDeltaConnectionVisibility2}" x:Name="DeltaConnection2" Data="M17,50 35,50 26,35 17,50 33,50" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUVConnectionVisibility2}" x:Name="VConnection2" Data="M32,50 35,50 26,35 17,50 20,50" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUStarConnectionVisibility2}" x:Name="StarConnection2" Data="M35,38 26,44 26,50 26,44 16,38 " StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor2}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUPEConnectionVisibility2}" x:Name="PEConnection2" Data="M26,44 37,44" StrokeThickness="1" Margin="-10,0,0,0"/>

                                <Ellipse Width="40" Height="40" Margin="-5,22,0,0" Stroke="{TemplateBinding ASUVoltageColor2}" StrokeThickness="3" />
                                <Ellipse  Opacity="0" Width="40" Height="40" Margin="-5,22,0,0" Stroke="#FFCDFF9B" StrokeThickness="3" x:Name="OutOfWorkBody2"/>


                                <Path Stroke="{TemplateBinding ASUVoltageColor3}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilLeftExitVisibility3}" x:Name="LeftConnector3" Data="M26,45 34,45" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor3}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilTopExitVisibility3}" x:Name="TopConnector3" Data="M55,15 55, 23" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor3}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilRightExitVisibility3}" x:Name="RightConnector3" Data="M72,45 100,45" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor3}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUCoilBottomExitVisibility3}" x:Name="BottomConnector3" Data="M63,60 70,75" StrokeThickness="1" Margin="-10,0,0,0"/>

                                <Path Stroke="{TemplateBinding ASUVoltageColor3}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUDeltaConnectionVisibility3}" x:Name="DeltaConnection3" Data="M44,50 62,50 53,35 44,50 60,50" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor3}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUVConnectionVisibility3}" x:Name="VConnection3" Data="M59,50 62,50 53,35 44,50 47,50" StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor3}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUStarConnectionVisibility3}" x:Name="StarConnection3" Data="M62,38 53,44 53,50 53,44 43,38 " StrokeThickness="1" Margin="-10,0,0,0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor3}" Canvas.Left="0" Canvas.Top="0" Visibility="{TemplateBinding ASUPEConnectionVisibility3}" x:Name="PEConnection3" Data="M53,44 64,44" StrokeThickness="1" Margin="-10,0,0,0"/>

                                <Ellipse Width="40" Height="40" Margin="25,22,0,0" Stroke="{TemplateBinding ASUVoltageColor3}" StrokeThickness="3" />
                                <Ellipse  Opacity="0" Width="40" Height="40" Margin="25,22,0,0" Stroke="#FFCDFF9B" StrokeThickness="3" x:Name="OutOfWorkBody3"/>

                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black"  />
                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />

                            </Canvas>
                        </Grid>
                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowContent}" Grid.Column="{TemplateBinding ASUGridColumnContent}"  x:Name="contentPresenter7" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Margin="{TemplateBinding ASUMarginContent}" Opacity="1"/>
                        <Canvas Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowASUTextContent}" Grid.Column="{TemplateBinding ASUGridColumnASUTextContent}" >
                            <TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Height="Auto" Width="{TemplateBinding ASUTextContentWidth}" VerticalAlignment="Center" HorizontalAlignment="Left" Visibility="{TemplateBinding ASUTextContentVisible}" x:Name="ASUTextContentPresenter" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTextContent}" Margin="{TemplateBinding ASUMarginText}" TextAlignment="Center" TextWrapping="Wrap" />
                        </Canvas>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CHighFrequencyLineTrap">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CHighFrequencyLineTrap">
                    <Grid Height="90" Width="180" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30" />
                            <RowDefinition Height="30"/>
                            <RowDefinition Height="30"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>

                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter8"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">
                                <VisualState x:Name="VisualStateOn">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateOff">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOn">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOff">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateBroken">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateUnDefined">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateManualPE">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork3"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateOutOfWork">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork2"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork3"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl"/>
                                <VisualState x:Name="LocalControlBlock"/>
                                <VisualState x:Name="LocalControlUnBlock"/>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid x:Name="RootGrid" local:CBaseControl.AttachedASUAngle="{TemplateBinding ASUAngle}" Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" Width="30" Height="30" RenderTransformOrigin="0.5,0.5">

                            <Canvas Width="28" Height="28" x:Name="RootCanvas">
                                <!--Background="#FF505050"-->
                                <Path Opacity="1" x:Name="LeftConnector" Canvas.Left="0" Canvas.Top="0" Data="M-16,14 2,14" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1"/>
                                <Path Opacity="1" x:Name="RightConnector" Canvas.Left="0" Canvas.Top="0" Data="M25,14 44,14" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1"/>
                                <!--
                                <ed:LineArrow  x:Name="Body1" Margin="6,9,0,0"  Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="2" Width="8" Height="8" EndArrow="NoArrow" BendAmount="2" local:CBaseControl.AttachedASUAngle="45" StartCorner="BottomLeft"/>
                                <ed:LineArrow  x:Name="Body2" Margin="14,9,0,0"  Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="2" Width="8" Height="8" EndArrow="NoArrow" BendAmount="2" local:CBaseControl.AttachedASUAngle="45" StartCorner="BottomLeft"/>
                                <ed:LineArrow  x:Name="Body3" Margin="22,9,0,0"  Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="2" Width="8" Height="8" EndArrow="NoArrow" BendAmount="2" local:CBaseControl.AttachedASUAngle="45" StartCorner="BottomLeft"/>

                                <ed:LineArrow  x:Name="OutOfWork1" Margin="6,9,0,0" Stroke="#FFCDFF9B" Opacity="0" StrokeThickness="2" Width="8" Height="8" EndArrow="NoArrow" BendAmount="2" local:CBaseControl.AttachedASUAngle="45" StartCorner="BottomLeft"/>
                                <ed:LineArrow  x:Name="OutOfWork2" Margin="14,9,0,0" Stroke="#FFCDFF9B" Opacity="0" StrokeThickness="2" Width="8" Height="8" EndArrow="NoArrow" BendAmount="2" local:CBaseControl.AttachedASUAngle="45" StartCorner="BottomLeft"/>
                                <ed:LineArrow  x:Name="OutOfWork3" Margin="22,9,0,0" Stroke="#FFCDFF9B" Opacity="0" StrokeThickness="2" Width="8" Height="8" EndArrow="NoArrow" BendAmount="2" local:CBaseControl.AttachedASUAngle="45" StartCorner="BottomLeft"/>
-->
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Margin="1,6,0,0" x:Name="Body1" Canvas.Left="0" Canvas.Top="0" Data="M0,8 C0,0 8,0 8,8" StrokeThickness="2"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Margin="10,6,0,0" x:Name="Body2" Canvas.Left="0" Canvas.Top="0" Data="M0,8 C0,0 8,0 8,8" StrokeThickness="2"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Margin="18,6,0,0" x:Name="Body3" Canvas.Left="0" Canvas.Top="0" Data="M0,8 C0,0 8,0 8,8" StrokeThickness="2"/>

                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Margin="1,6,0,0" x:Name="OutOfWork1" Canvas.Left="0" Canvas.Top="0" Data="M0,8 C0,0 8,0 8,8" StrokeThickness="2"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Margin="10,6,0,0" x:Name="OutOfWork2" Canvas.Left="0" Canvas.Top="0" Data="M0,8 C0,0 8,0 8,8" StrokeThickness="2"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Margin="18,6,0,0" x:Name="OutOfWork3" Canvas.Left="0" Canvas.Top="0" Data="M0,8 C0,0 8,0 8,8" StrokeThickness="2"/>


                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black"  />
                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />

                            </Canvas>


                        </Grid><!--
                        <ed:LineArrow Visibility="{TemplateBinding ASURegulatorVisibility}" Stroke="{TemplateBinding ASUVoltageColor}" Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" ArrowSize="4" StrokeThickness="2" Width="30" Height="30" Margin="0,-2,0,0" StartCorner="BottomLeft"  BendAmount="0" x:Name="RPN"/>
                        -->
                        <Canvas Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" Width="30" Height="30" >
                            <Path Stroke="{TemplateBinding ASUVoltageColor}"  Visibility="{TemplateBinding ASURegulatorVisibility}" x:Name="RPN" Canvas.Left="0" Canvas.Top="0"
                              Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center"
                                      Data="M0,28 L35,-7 L33,-8 L38,-10 L37,-5 L35,-7 z" StrokeThickness="3" Margin="0"/>
                        </Canvas>
                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowContent}" Grid.Column="{TemplateBinding ASUGridColumnContent}"  x:Name="contentPresenter8" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Margin="{TemplateBinding ASUMarginContent}" Opacity="1"/>
                        <Canvas Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowASUTextContent}" Grid.Column="{TemplateBinding ASUGridColumnASUTextContent}" >
							<TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Height="Auto" Width="{TemplateBinding ASUTextContentWidth}" VerticalAlignment="Center" HorizontalAlignment="Left" Visibility="{TemplateBinding ASUTextContentVisible}" x:Name="ASUTextContentPresenter" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTextContent}" Margin="{TemplateBinding ASUMarginText}" TextAlignment="Center" TextWrapping="Wrap" />
                       </Canvas>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CCurrentTransformer">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CCurrentTransformer">
                    <Grid Height="90" Width="180" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30" />
                            <RowDefinition Height="30"/>
                            <RowDefinition Height="30"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>

                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter9"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">
                                <VisualState x:Name="VisualStateOn">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PinOutOfWork1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PinOutOfWork2"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateOff">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PinOutOfWork1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PinOutOfWork2"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOn">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PinOutOfWork1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PinOutOfWork2"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOff">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PinOutOfWork1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PinOutOfWork2"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateBroken">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PinOutOfWork1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PinOutOfWork2"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateUnDefined">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PinOutOfWork1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PinOutOfWork2"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateManualPE">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PinOutOfWork1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PinOutOfWork2"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateOutOfWork">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutOfWork1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PinOutOfWork1"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PinOutOfWork2"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl"/>
                                <VisualState x:Name="LocalControlBlock"/>
                                <VisualState x:Name="LocalControlUnBlock"/>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid x:Name="RootGrid" local:CBaseControl.AttachedASUAngle="{TemplateBinding ASUAngle}" Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" Width="30" Height="30" RenderTransformOrigin="0.5,0.5">

                            <Canvas Width="28" Height="28" x:Name="RootCanvas">
                                
								<Path Opacity="1" x:Name="Connector" Canvas.Left="0" Canvas.Top="0" Data="M-16,14 44,14" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1"/>
                                <Path Opacity="1" x:Name="Pin1" Canvas.Left="0" Canvas.Top="0" Data="M11,0 11,6" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="2"/>
                                <Path Opacity="1" x:Name="Pin2" Canvas.Left="0" Canvas.Top="0" Data="M17,0 17,6" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="2"/>
                                <Ellipse Height="20" Canvas.Left="4" Canvas.Top="4" Width="20" StrokeThickness="2"  Stroke="{TemplateBinding ASUVoltageColor}" x:Name="Body1"/>
								
								
								<Path Canvas.Left="0" Canvas.Top="0" Data="M11,0 11,6" Stroke="#FFCDFF9B" StrokeThickness="2" Opacity="0" x:Name="PinOutOfWork1"/>
                                <Path Canvas.Left="0" Canvas.Top="0" Data="M17,0 17,6" Stroke="#FFCDFF9B" StrokeThickness="2" Opacity="0" x:Name="PinOutOfWork2"/>
                                <Ellipse Height="20" Canvas.Left="4" Canvas.Top="4" Width="20" StrokeThickness="2"  Stroke="#FFCDFF9B" x:Name="OutOfWork1" Opacity="0"/>
								
								
                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black"  />
                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />

                            </Canvas>


                        </Grid>

                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowContent}" Grid.Column="{TemplateBinding ASUGridColumnContent}"  x:Name="contentPresenter9" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Margin="{TemplateBinding ASUMarginContent}" Opacity="1"/>
                        <Canvas Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowASUTextContent}" Grid.Column="{TemplateBinding ASUGridColumnASUTextContent}" >
							<TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Height="Auto" Width="{TemplateBinding ASUTextContentWidth}" VerticalAlignment="Center" HorizontalAlignment="Left" Visibility="{TemplateBinding ASUTextContentVisible}" x:Name="ASUTextContentPresenter" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTextContent}" Margin="{TemplateBinding ASUMarginText}" TextAlignment="Center" TextWrapping="Wrap" />
                       </Canvas>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CLinkCapacitor">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CLinkCapacitor">
                    <Grid Height="90" Width="180" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30" />
                            <RowDefinition Height="30"/>
                            <RowDefinition Height="30"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>

                        <VisualStateManager.VisualStateGroups>

                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter10"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">

                                <VisualState x:Name="VisualStateOn"/>
                                <VisualState x:Name="VisualStateOff"/>
                                <VisualState x:Name="VisualStateTurningOn"/>
                                <VisualState x:Name="VisualStateTurningOff"/>
                                <VisualState x:Name="VisualStateBroken"/>
                                <VisualState x:Name="VisualStateUnDefined"/>
                                <VisualState x:Name="VisualStateManualPE"/>
                                <VisualState x:Name="VisualStateOutOfWork"/>






                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl"/>
                                <VisualState x:Name="LocalControlBlock"/>
                                <VisualState x:Name="LocalControlUnBlock"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid x:Name="RootGrid" local:CBaseControl.AttachedASUAngle="{TemplateBinding ASUAngle}" Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" Width="30" Height="30" RenderTransformOrigin="0.5,0.5">

                            <Canvas Width="28" Height="28" x:Name="RootCanvas" >
                                <!--Background="#FF505050"-->
                        <Path Opacity="1" x:Name="LeftConnector" Canvas.Left="0" Canvas.Top="0" Data="M-16,14 10,14" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1"/>
                        <Path Opacity="1" x:Name="RightConnector" Canvas.Left="0" Canvas.Top="0" Data="M18,14 44,14" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1"/>

                        <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="2" Data="M10,6 v16" x:Name="Body1"/>
                        <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="2" Data="M18,6 v16" x:Name="Body2"/>

                        <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black"  />
                        <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />

                        </Canvas>

                    </Grid>

                    <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowContent}" Grid.Column="{TemplateBinding ASUGridColumnContent}"  x:Name="contentPresenter10" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Margin="{TemplateBinding ASUMarginContent}" Opacity="1"/>
                    <Canvas Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowASUTextContent}" Grid.Column="{TemplateBinding ASUGridColumnASUTextContent}" >
                        <TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Height="Auto" Width="{TemplateBinding ASUTextContentWidth}" VerticalAlignment="Center" HorizontalAlignment="Left" Visibility="{TemplateBinding ASUTextContentVisible}" x:Name="ASUTextContentPresenter" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTextContent}" Margin="{TemplateBinding ASUMarginText}" TextAlignment="Center" TextWrapping="Wrap" />
                    </Canvas>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CFilterOfConnection">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CFilterOfConnection">
                    <Grid Height="90" Width="180" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30" />
                            <RowDefinition Height="30"/>
                            <RowDefinition Height="30"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>

                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter11"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">
                                <VisualState x:Name="VisualStateOn"/>
                                <VisualState x:Name="VisualStateOff"/>
                                <VisualState x:Name="VisualStateTurningOn"/>
                                <VisualState x:Name="VisualStateTurningOff"/>
                                <VisualState x:Name="VisualStateBroken"/>
                                <VisualState x:Name="VisualStateUnDefined"/>
                                <VisualState x:Name="VisualStateManualPE"/>
                                <VisualState x:Name="VisualStateOutOfWork"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl"/>
                                <VisualState x:Name="LocalControlBlock"/>
                                <VisualState x:Name="LocalControlUnBlock"/>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid x:Name="RootGrid" local:CBaseControl.AttachedASUAngle="{TemplateBinding ASUAngle}" Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" Width="30" Height="30" RenderTransformOrigin="0.5,0.5">

                            <Canvas Width="28" Height="28" x:Name="RootCanvas">
                                <!--Background="#FF505050"-->
                                <Path Opacity="1" x:Name="LeftConnector" Canvas.Left="0" Canvas.Top="0" Data="M-16,14 2,14" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1"/>
                                <Path Opacity="1" x:Name="RightConnector" Canvas.Left="0" Canvas.Top="0" Data="M25,14 35,14" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1"/>

                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" x:Name="Body3" Data="M35,2 v24"/>
                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" x:Name="Body4" Data="M40,5 v18"/>
                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" x:Name="Body5" Data="M45,8 v12"/>
                                <Rectangle Margin="1" Opacity="1" x:Name="Body" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" Width="26" Height="26"/>


                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black"  />
                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />

                            </Canvas>

                        </Grid>
                        <TextBlock Opacity="1" x:Name="TextOfFilter" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="8" FontWeight="Bold" Foreground="{TemplateBinding ASUVoltageColor}"><Run Text="ФП"/></TextBlock>

                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowContent}" Grid.Column="{TemplateBinding ASUGridColumnContent}"  x:Name="contentPresenter11" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Margin="{TemplateBinding ASUMarginContent}" Opacity="1"/>
                        <Canvas Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowASUTextContent}" Grid.Column="{TemplateBinding ASUGridColumnASUTextContent}" >
                            <TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Height="Auto" Width="{TemplateBinding ASUTextContentWidth}" VerticalAlignment="Center" HorizontalAlignment="Left" Visibility="{TemplateBinding ASUTextContentVisible}" x:Name="ASUTextContentPresenter" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTextContent}" Margin="{TemplateBinding ASUMarginText}" TextAlignment="Center" TextWrapping="Wrap" />
                        </Canvas>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CPEConnector">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CPEConnector">
                    <Grid Height="90" Width="180" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30" />
                            <RowDefinition Height="30"/>
                            <RowDefinition Height="30"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>

                        <VisualStateManager.VisualStateGroups>

                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter12"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">
                                <VisualState x:Name="VisualStateOn"/>
                                <VisualState x:Name="VisualStateOff"/>
                                <VisualState x:Name="VisualStateTurningOn"/>
                                <VisualState x:Name="VisualStateTurningOff"/>
                                <VisualState x:Name="VisualStateBroken"/>
                                <VisualState x:Name="VisualStateUnDefined"/>
                                <VisualState x:Name="VisualStateManualPE"/>
                                <VisualState x:Name="VisualStateOutOfWork"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl"/>
                                <VisualState x:Name="LocalControlBlock"/>
                                <VisualState x:Name="LocalControlUnBlock"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid x:Name="RootGrid" local:CBaseControl.AttachedASUAngle="{TemplateBinding ASUAngle}" Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" Width="30" Height="30" RenderTransformOrigin="0.5,0.5">

                            <Canvas Width="28" Height="28" x:Name="RootCanvas" >
                                <!--Background="#FF505050"-->
                                <Path Opacity="1" x:Name="LeftConnector" Canvas.Left="0" Canvas.Top="0" Data="M-16,14 15,14" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1"/>

                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" x:Name="Body3" Data="M14,2 v24"/>
                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" x:Name="Body4" Data="M19 ,5 v18"/>
                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" x:Name="Body5" Data="M24,8 v12"/>


                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black"  />
                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />

                            </Canvas>
                        </Grid>

                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowContent}" Grid.Column="{TemplateBinding ASUGridColumnContent}"  x:Name="contentPresenter12" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Margin="{TemplateBinding ASUMarginContent}" Opacity="1"/>
                        <Canvas Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowASUTextContent}" Grid.Column="{TemplateBinding ASUGridColumnASUTextContent}" >
                            <TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Height="Auto" Width="{TemplateBinding ASUTextContentWidth}" VerticalAlignment="Center" HorizontalAlignment="Left" Visibility="{TemplateBinding ASUTextContentVisible}" x:Name="ASUTextContentPresenter" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTextContent}" Margin="{TemplateBinding ASUMarginText}" TextAlignment="Center" TextWrapping="Wrap" />
                        </Canvas>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CSurgeSuppressor">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CSurgeSuppressor">
                    <Grid Height="90" Width="180" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30" />
                            <RowDefinition Height="30"/>
                            <RowDefinition Height="30"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>

                        <VisualStateManager.VisualStateGroups>

                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter13"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">
                                <VisualState x:Name="VisualStateOn"/>
                                <VisualState x:Name="VisualStateOff"/>
                                <VisualState x:Name="VisualStateTurningOn"/>
                                <VisualState x:Name="VisualStateTurningOff"/>
                                <VisualState x:Name="VisualStateBroken"/>
                                <VisualState x:Name="VisualStateUnDefined"/>
                                <VisualState x:Name="VisualStateManualPE"/>
                                <VisualState x:Name="VisualStateOutOfWork"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl"/>
                                <VisualState x:Name="LocalControlBlock"/>
                                <VisualState x:Name="LocalControlUnBlock"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid x:Name="RootGrid" local:CBaseControl.AttachedASUAngle="{TemplateBinding ASUAngle}" Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" Width="30" Height="30" RenderTransformOrigin="0.5,0.5">

                            <Canvas Width="28" Height="28" x:Name="RootCanvas" >
                                <!--Background="#FF505050"-->
                                <Path Opacity="1" x:Name="LeftConnector" Canvas.Left="0" Canvas.Top="0" Data="M-16,14 2,14" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1"/>

                                <Rectangle x:Name="Body" Opacity="1" Canvas.Left="0" Canvas.Top="7" Width="28" Height="13" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="2"/>
                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" x:Name="Body3" Data="M35,2 v24"/>
                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" x:Name="Body4" Data="M40,5 v18"/>
                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" x:Name="Body5" Data="M45,8 v12"/>
                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1" x:Name="Body6" Data="M27,14 h7 "/>

                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="2" Data="M2,24 22,2 28,2" x:Name="Body7" />

                                <Path Opacity="0" Canvas.Left="0" Canvas.Top="0" Stroke="#FFCDFF9B" StrokeThickness="3" Data="M2,5 v18" x:Name="OutOfWorkBody1"/>
                                <Path Opacity="0" Canvas.Left="0" Canvas.Top="0" Stroke="#FFCDFF9B" StrokeThickness="3" Data="M26,5 v18" x:Name="OutOfWorkBody2"/>
                                <Path Opacity="0" Canvas.Left="0" Canvas.Top="0" Stroke="#FFCDFF9B" StrokeThickness="3" Data="M14,2 v24" x:Name="OutOfWorkSwitch"/>


                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black"  />
                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />

                            </Canvas>
                        </Grid>

                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowContent}" Grid.Column="{TemplateBinding ASUGridColumnContent}"  x:Name="contentPresenter13" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Margin="{TemplateBinding ASUMarginContent}" Opacity="1"/>
                        <Canvas Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowASUTextContent}" Grid.Column="{TemplateBinding ASUGridColumnASUTextContent}" >
                            <TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Height="Auto" Width="{TemplateBinding ASUTextContentWidth}" VerticalAlignment="Center" HorizontalAlignment="Left" Visibility="{TemplateBinding ASUTextContentVisible}" x:Name="ASUTextContentPresenter" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTextContent}" Margin="{TemplateBinding ASUMarginText}" TextAlignment="Center" TextWrapping="Wrap" />
                        </Canvas>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CDischarger">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CDischarger">
                    <Grid Height="90" Width="180" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30" />
                            <RowDefinition Height="30"/>
                            <RowDefinition Height="30"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>

                        <VisualStateManager.VisualStateGroups>

                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter14"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">
                                <VisualState x:Name="VisualStateOn"/>
                                <VisualState x:Name="VisualStateOff"/>
                                <VisualState x:Name="VisualStateTurningOn"/>
                                <VisualState x:Name="VisualStateTurningOff"/>
                                <VisualState x:Name="VisualStateBroken"/>
                                <VisualState x:Name="VisualStateUnDefined"/>
                                <VisualState x:Name="VisualStateManualPE"/>
                                <VisualState x:Name="VisualStateOutOfWork"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl"/>
                                <VisualState x:Name="LocalControlBlock"/>
                                <VisualState x:Name="LocalControlUnBlock"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid x:Name="RootGrid" local:CBaseControl.AttachedASUAngle="{TemplateBinding ASUAngle}" Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" Width="30" Height="30" RenderTransformOrigin="0.5,0.5">

                            <Canvas Width="28" Height="28" x:Name="RootCanvas" >
                                <!--Background="#FF505050"-->
                                <Path Opacity="1" x:Name="LeftConnector" Canvas.Left="0" Canvas.Top="0" Data="M-16,14 2,14" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1"/>

                                <Rectangle x:Name="Body" Opacity="1" Canvas.Left="0" Canvas.Top="7" Width="28" Height="14" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="2"/>
                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" x:Name="Body3" Data="M35,2 v24"/>
                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" x:Name="Body4" Data="M40,5 v18"/>
                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="3" x:Name="Body5" Data="M45,8 v12"/>
                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1" x:Name="Body6" Data="M27,14 h7 "/>
                                <!--  
                                <ed:LineArrow local:CBaseControl.AttachedASUAngle="45" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="2" Width="7" Height="7" Margin="5,9,0,0" Grid.Row="2" StartCorner="BottomLeft"  BendAmount="0" x:Name="LeftArrow" ArrowSize="2" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                                <ed:LineArrow local:CBaseControl.AttachedASUAngle="225" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="2" Width="7" Height="7" Margin="23,19,0,0" Grid.Row="2" StartCorner="BottomLeft"  BendAmount="0" x:Name="RightArrow" ArrowSize="2" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                                 -->
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Fill="{TemplateBinding ASUVoltageColor}" x:Name="LeftArrow" Canvas.Left="0" Canvas.Top="7" Data="M5,7 L7,7 L7,5 L10,7 L7,9 L7,7 z" StrokeThickness="1" Margin="0"/>
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Fill="{TemplateBinding ASUVoltageColor}" x:Name="RightArrow" Canvas.Left="0" Canvas.Top="7" Data="M23,7 L21,7 L21,5 L18,7 L21,9 L21,7 z" StrokeThickness="1" Margin="0"/>


                                <Path Opacity="0" Canvas.Left="0" Canvas.Top="0" Stroke="#FFCDFF9B" StrokeThickness="3" Data="M2,5 v18" x:Name="OutOfWorkBody1"/>
                                <Path Opacity="0" Canvas.Left="0" Canvas.Top="0" Stroke="#FFCDFF9B" StrokeThickness="3" Data="M26,5 v18" x:Name="OutOfWorkBody2"/>
                                <Path Opacity="0" Canvas.Left="0" Canvas.Top="0" Stroke="#FFCDFF9B" StrokeThickness="3" Data="M14,2 v24" x:Name="OutOfWorkSwitch"/>


                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black"  />
                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />

                            </Canvas>
                        </Grid>

                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowContent}" Grid.Column="{TemplateBinding ASUGridColumnContent}"  x:Name="contentPresenter14" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Margin="{TemplateBinding ASUMarginContent}" Opacity="1"/>
                        <Canvas Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowASUTextContent}" Grid.Column="{TemplateBinding ASUGridColumnASUTextContent}" >
                            <TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Height="Auto" Width="{TemplateBinding ASUTextContentWidth}" VerticalAlignment="Center" HorizontalAlignment="Left" Visibility="{TemplateBinding ASUTextContentVisible}" x:Name="ASUTextContentPresenter" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTextContent}" Margin="{TemplateBinding ASUMarginText}" TextAlignment="Center" TextWrapping="Wrap" />
                        </Canvas>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CReactor">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CReactor">
                    <Grid Height="90" Width="180" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30" />
                            <RowDefinition Height="30"/>
                            <RowDefinition Height="30"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>

                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter15"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">
                                <VisualState x:Name="VisualStateOn"/>
                                <VisualState x:Name="VisualStateOff"/>
                                <VisualState x:Name="VisualStateTurningOn"/>
                                <VisualState x:Name="VisualStateTurningOff"/>
                                <VisualState x:Name="VisualStateBroken"/>
                                <VisualState x:Name="VisualStateUnDefined"/>
                                <VisualState x:Name="VisualStateManualPE"/>
                                <VisualState x:Name="VisualStateOutOfWork"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl"/>
                                <VisualState x:Name="LocalControlBlock"/>
                                <VisualState x:Name="LocalControlUnBlock"/>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid local:CBaseControl.AttachedASUAngle="{TemplateBinding ASUAngle}"  x:Name="RootGrid" Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" Width="30" Height="30" RenderTransformOrigin="0.5,0.5">

                            <Canvas Width="28" Height="28" x:Name="RootCanvas">
                                <!--Background="#FF505050"-->
                                <!--                                <Path Opacity="1" x:Name="LeftConnector" Canvas.Left="0" Canvas.Top="0" Data="M-16,14 2,14" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1"/>
                                    <Path Opacity="1" x:Name="RightConnector" Canvas.Left="0" Canvas.Top="0" Data="M27,14 44,14" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1"/>
                                    <Path Opacity="1" x:Name="Body2" Canvas.Left="0" Canvas.Top="0" Data="M14,28 14,14 27,14" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="2"/>

                                    <ed:Arc x:Name="Body1" Margin="0"  Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="2" Width="28" Height="28" StartAngle="270" EndAngle="180" />
                                
                                     <ed:LineArrow Visibility="{TemplateBinding ASURegulatorVisibility}" Stroke="{TemplateBinding ASUVoltageColor}" ArrowSize="4" StrokeThickness="2" Width="40" Height="40" Margin="-6,-6,0,0" Grid.Row="2" StartCorner="BottomLeft"  BendAmount="0" x:Name="RPN"/>
    -->
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Margin="0" x:Name="Body1" Canvas.Left="0" Canvas.Top="0" 
                                          Data="M-16,14 H2 C13,-22 45,22 14,27 V14 H44" StrokeThickness="2"/>



                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black"  />
                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />

                            </Canvas>
                        </Grid>
                        <Canvas Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" Width="30" Height="30" >

                            <Path Stroke="{TemplateBinding ASUVoltageColor}"  Visibility="{TemplateBinding ASURegulatorVisibility}" x:Name="RPN" Canvas.Left="0" Canvas.Top="0"
                              Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center"
                                      Data="M0,28 L35,-7 L33,-8 L38,-10 L37,-5 L35,-7 z" StrokeThickness="3" Margin="0"/>

                        </Canvas>
                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowContent}" Grid.Column="{TemplateBinding ASUGridColumnContent}"  x:Name="contentPresenter15" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Margin="{TemplateBinding ASUMarginContent}" Opacity="1"/>
                        <Canvas Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowASUTextContent}" Grid.Column="{TemplateBinding ASUGridColumnASUTextContent}" >
                            <TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Height="Auto" Width="{TemplateBinding ASUTextContentWidth}" VerticalAlignment="Center" HorizontalAlignment="Left" Visibility="{TemplateBinding ASUTextContentVisible}" x:Name="ASUTextContentPresenter" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTextContent}" Margin="{TemplateBinding ASUMarginText}" TextAlignment="Center" TextWrapping="Wrap" />
                        </Canvas>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CArrow">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CArrow">
                    <Grid Height="90" Width="180" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30" />
                            <RowDefinition Height="30"/>
                            <RowDefinition Height="30"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>

                        <VisualStateManager.VisualStateGroups>

                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter16"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">
                                <VisualState x:Name="VisualStateOn"/>
                                <VisualState x:Name="VisualStateOff"/>
                                <VisualState x:Name="VisualStateTurningOn"/>
                                <VisualState x:Name="VisualStateTurningOff"/>
                                <VisualState x:Name="VisualStateBroken"/>
                                <VisualState x:Name="VisualStateUnDefined"/>
                                <VisualState x:Name="VisualStateManualPE"/>
                                <VisualState x:Name="VisualStateOutOfWork"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl"/>
                                <VisualState x:Name="LocalControlBlock"/>
                                <VisualState x:Name="LocalControlUnBlock"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid x:Name="RootGrid" local:CBaseControl.AttachedASUAngle="{TemplateBinding ASUAngle}" Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" Width="30" Height="30" RenderTransformOrigin="0.5,0.5">

                            <Canvas Width="28" Height="28" x:Name="RootCanvas" >
                                <!--Background="#FF505050"-->
                                <!-- 
                                <Path Opacity="1" x:Name="LeftConnector" Canvas.Left="0" Canvas.Top="0" Data="M-16,14 0,14" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1"/>                               
                                <ed:LineArrow local:CBaseControl.AttachedASUAngle="45" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1" Width="10" Height="10" Margin="6,7,0,0" Grid.Row="2" StartCorner="BottomLeft"  BendAmount="0" x:Name="RightArrow" ArrowSize="10" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                                -->
                                <Path Stroke="{TemplateBinding ASUVoltageColor}" Fill="{TemplateBinding ASUVoltageColor}"  x:Name="RightArrow" Canvas.Left="0" Canvas.Top="0" Data="M14,39 L14,20 L9,20 L14,10 L19,20 L14,20 z" StrokeThickness="1" Margin="0"/>
                              
                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black"  />
                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />

                            </Canvas>
                        </Grid>

                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowContent}" Grid.Column="{TemplateBinding ASUGridColumnContent}"  x:Name="contentPresenter16" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Margin="{TemplateBinding ASUMarginContent}" Opacity="1"/>

                        <Canvas Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowASUTextContent}" Grid.Column="{TemplateBinding ASUGridColumnASUTextContent}" >
                            <TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Height="Auto" Width="{TemplateBinding ASUTextContentWidth}" VerticalAlignment="Center" HorizontalAlignment="Left" Visibility="{TemplateBinding ASUTextContentVisible}" x:Name="ASUTextContentPresenter" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTextContent}" Margin="{TemplateBinding ASUMarginText}" TextAlignment="Center" TextWrapping="Wrap" />
                        </Canvas>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CPointOnLine">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>

        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CPointOnLine">
                    <Grid Height="90" Width="90" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30" />
                            <RowDefinition Height="30"/>
                            <RowDefinition Height="30"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="30"/>
                            <ColumnDefinition Width="30"/>
                            <ColumnDefinition Width="30"/>
                        </Grid.ColumnDefinitions>
                        
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">

                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Canvas x:Name="RootCanvas" Width="15" Height="15" Grid.Row="1" Grid.Column="1">


                            <Border x:Name="RootGrid" VerticalAlignment="Center" HorizontalAlignment="Center" Width="15" Height="15" RenderTransformOrigin="0.5,0.5">
                                <Ellipse  Canvas.Left="12" Canvas.Top="12" Stroke="Black" Fill="Black" Width="4" Height="4" VerticalAlignment="Center" HorizontalAlignment="Center" />
                            </Border>
                            <Border BorderThickness="1" CornerRadius="2" HorizontalAlignment="Center" VerticalAlignment="Center" Width="15" Height="15" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black"  />
                            <Border BorderThickness="1" CornerRadius="2" HorizontalAlignment="Center" VerticalAlignment="Center" Width="15" Height="15" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />
                        </Canvas>

                        <Canvas Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowASUTextContent}" Grid.Column="{TemplateBinding ASUGridColumnASUTextContent}" >
                            <TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Height="Auto" Width="{TemplateBinding ASUTextContentWidth}" VerticalAlignment="Center" HorizontalAlignment="Left" Visibility="{TemplateBinding ASUTextContentVisible}" x:Name="ASUTextContentPresenter" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTextContent}" Margin="{TemplateBinding ASUMarginText}" TextAlignment="Center" TextWrapping="Wrap" />
                        </Canvas>

                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>

    </Style>

    <Style TargetType="local:CLine">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CLine">
                    <Grid  HorizontalAlignment="Center" VerticalAlignment="Center" >
                        <VisualStateManager.VisualStateGroups>

                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">

                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">
                                <VisualState x:Name="VisualStateOn"/>
                                <VisualState x:Name="VisualStateOff"/>
                                <VisualState x:Name="VisualStateTurningOn"/>
                                <VisualState x:Name="VisualStateTurningOff"/>
                                <VisualState x:Name="VisualStateBroken"/>
                                <VisualState x:Name="VisualStateUnDefined"/>
                                <VisualState x:Name="VisualStateManualPE"/>
                                <VisualState x:Name="VisualStateOutOfWork"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl"/>
                                <VisualState x:Name="LocalControlBlock"/>
                                <VisualState x:Name="LocalControlUnBlock"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Canvas Width="{Binding ActualWidth, ElementName=RootGrid}"   Height="{Binding ActualHeight, ElementName=RootGrid}">


                            <Border x:Name="RootGrid" VerticalAlignment="Center" HorizontalAlignment="Center" Width="Auto" Height="Auto" RenderTransformOrigin="0.5,0.5">
                                <Line VerticalAlignment="Center" HorizontalAlignment="Center" x:Name="TheLine"  X1="0" Y1="0" X2="{TemplateBinding ASUCoordinateX2}" Y2="{TemplateBinding ASUCoordinateY2}" Fill="Black" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1"/>
                            </Border>
                            <Border Canvas.Left="-5" Canvas.Top="-5"  BorderThickness="1" CornerRadius="2" HorizontalAlignment="Center" VerticalAlignment="Center"  Width="{Binding ActualWidth, Converter={StaticResource SizeConverter}, ElementName=RootGrid}"   Height="{Binding ActualHeight, Converter={StaticResource SizeConverter}, ElementName=RootGrid}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />
                            <Border Canvas.Left="-5" Canvas.Top="-5"  BorderThickness="1" CornerRadius="2" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding ActualWidth, Converter={StaticResource SizeConverter}, ElementName=RootGrid}" Height="{Binding ActualHeight, Converter={StaticResource SizeConverter}, ElementName=RootGrid}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black" />
                        </Canvas>

                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CBus">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CBus">
                    <Grid  HorizontalAlignment="Center" VerticalAlignment="Center" >
                        <VisualStateManager.VisualStateGroups>

                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">

                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">
                                <VisualState x:Name="VisualStateOn"/>
                                <VisualState x:Name="VisualStateOff"/>
                                <VisualState x:Name="VisualStateTurningOn"/>
                                <VisualState x:Name="VisualStateTurningOff"/>
                                <VisualState x:Name="VisualStateBroken"/>
                                <VisualState x:Name="VisualStateUnDefined"/>
                                <VisualState x:Name="VisualStateManualPE"/>
                                <VisualState x:Name="VisualStateOutOfWork"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl"/>
                                <VisualState x:Name="LocalControlBlock"/>
                                <VisualState x:Name="LocalControlUnBlock"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Canvas Width="{Binding ActualWidth, ElementName=RootGrid}"   Height="{Binding ActualHeight, ElementName=RootGrid}">


                            <Border x:Name="RootGrid" VerticalAlignment="Center" HorizontalAlignment="Center" Width="Auto" Height="Auto" RenderTransformOrigin="0.5,0.5">
                                <Line VerticalAlignment="Center" HorizontalAlignment="Center" x:Name="TheLine"  X1="0" Y1="0" X2="{TemplateBinding ASUCoordinateX2}" Y2="{TemplateBinding ASUCoordinateY2}" Fill="Black" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="5"/>
                            </Border>
                            <Border Canvas.Left="-5" Canvas.Top="-5"  BorderThickness="1" CornerRadius="2" HorizontalAlignment="Center" VerticalAlignment="Center"  Width="{Binding ActualWidth, Converter={StaticResource SizeConverter}, ElementName=RootGrid}"   Height="{Binding ActualHeight, Converter={StaticResource SizeConverter}, ElementName=RootGrid}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />
                            <Border Canvas.Left="-5" Canvas.Top="-5"  BorderThickness="1" CornerRadius="2" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding ActualWidth, Converter={StaticResource SizeConverter}, ElementName=RootGrid}" Height="{Binding ActualHeight, Converter={StaticResource SizeConverter}, ElementName=RootGrid}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black" />
                        </Canvas>

                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CCellCart">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CCellCart">
                    <Grid Height="90" Width="180" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30" />
                            <RowDefinition Height="30"/>
                            <RowDefinition Height="30"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>

                        <VisualStateManager.VisualStateGroups>

                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter17"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">

                                <VisualState x:Name="VisualStateOn">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="CellCartOn"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OnConnector"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="CellCartBody"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Connector"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="CellCartOutBody"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutConnector"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateOff">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="CellCartOn"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OnConnector"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="CellCartBody"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Connector"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="CellCartOutBody"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutConnector"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOn">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="CellCartOn"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OnConnector"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="CellCartBody"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Connector"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="CellCartOutBody"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutConnector"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOff">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="CellCartOn"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OnConnector"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="CellCartBody"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Connector"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="CellCartOutBody"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutConnector"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateBroken">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="CellCartOn"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OnConnector"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="CellCartBody"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Connector"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="CellCartOutBody"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutConnector"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateUnDefined">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="CellCartOn"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OnConnector"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="CellCartBody"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Connector"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="CellCartOutBody"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutConnector"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateManualPE">
                                    <!--РєР°Рє VisualStateUnDefined-->
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="CellCartOn"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OnConnector"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="CellCartBody"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Connector"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="CellCartOutBody"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutConnector"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateOutOfWork">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="CellCartOn"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OnConnector"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="CellCartBody"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Connector"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="CellCartOutBody"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OutConnector"/>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                    </Storyboard>
                                </VisualState>






                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl">
                                    <Storyboard>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="LocalControlBlock">
                                    <Storyboard>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="LocalControlUnBlock">
                                    <Storyboard>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid x:Name="RootGrid" local:CBaseControl.AttachedASUAngle="{TemplateBinding ASUAngle}" Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" Width="30" Height="30" RenderTransformOrigin="0.5,0.5">

                            <Canvas Width="28" Height="28" x:Name="RootCanvas" >
                                <!--Background="#FF505050"-->
                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="2" Data="M22,5 14,14 5,5 " x:Name="CellCartOn"/>
                                <Path Visibility="{TemplateBinding ASUConnectorVisibility}" Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1" Data="M14,-4 v18" x:Name="OnConnector"/>

                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="2" Data="M22,10 14,19 5,10 " x:Name="CellCartBody"/>
                                <Path Opacity="1" Canvas.Left="0" Canvas.Top="0" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1" Data="M14,19 v25" x:Name="Connector"/>

                                <Path Opacity="0" Canvas.Left="0" Canvas.Top="0" Stroke="LightGray" StrokeThickness="2" Data="M22,10 14,19 5,10 " x:Name="CellCartOutBody"/>
                                <Path Opacity="0" Canvas.Left="0" Canvas.Top="0" Stroke="LightGray" StrokeThickness="1" Data="M14,19 v25" x:Name="OutConnector"/>

                                <Path Opacity="0" Canvas.Left="0" Canvas.Top="0" Stroke="Red" StrokeThickness="3" Data="M28,0 0,28" x:Name="Broken" />


                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black"  />
                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />

                            </Canvas>


                        </Grid>

                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowContent}" Grid.Column="{TemplateBinding ASUGridColumnContent}"  x:Name="contentPresenter17" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Margin="{TemplateBinding ASUMarginContent}" Opacity="1"/>
                        <Canvas Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowASUTextContent}" Grid.Column="{TemplateBinding ASUGridColumnASUTextContent}" >
                            <TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Height="Auto" Width="{TemplateBinding ASUTextContentWidth}" VerticalAlignment="Center" HorizontalAlignment="Left" Visibility="{TemplateBinding ASUTextContentVisible}" x:Name="ASUTextContentPresenter" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTextContent}" Margin="{TemplateBinding ASUMarginText}" TextAlignment="Center" TextWrapping="Wrap" />
                        </Canvas>

                    </Grid>

                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CSystemWorkModeSL">

        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CSystemWorkModeSL">
                    <Border CornerRadius="0" BorderThickness="0" BorderBrush="Gray" Margin="0">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="VisualStateGroupSystemWorkStates">

                                <VisualState x:Name="VisualStateDuty">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderUnDefined" />
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderDuty" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderPE" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderFindPE" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName= "BorderDistControl" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderLocalWithBlock" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName= "BorderLocalWithoutBlock"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStatePE">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderUnDefined" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderDuty" />
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderPE" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderFindPE" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName= "BorderDistControl" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderLocalWithBlock" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName= "BorderLocalWithoutBlock"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateFindPE">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderUnDefined" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderDuty" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderPE" />
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderFindPE" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName= "BorderDistControl" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderLocalWithBlock" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName= "BorderLocalWithoutBlock"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateDistControl">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderUnDefined" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderDuty" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderPE" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderFindPE" />
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName= "BorderDistControl" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderLocalWithBlock" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName= "BorderLocalWithoutBlock"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateLocalWithBlock">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderUnDefined" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderDuty" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderPE" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderFindPE" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName= "BorderDistControl" />
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderLocalWithBlock" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName= "BorderLocalWithoutBlock"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateLocalWithoutBlock">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderUnDefined" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderDuty" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderPE" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderFindPE" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName= "BorderDistControl" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderLocalWithBlock" />
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName= "BorderLocalWithoutBlock"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateUnDefined">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderUnDefined" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderDuty" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderPE" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderFindPE" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName= "BorderDistControl" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderLocalWithBlock" />
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName= "BorderLocalWithoutBlock"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid >
                            <Border Name="BorderDuty" Background="LightGray" BorderBrush="Gray" BorderThickness="1" CornerRadius="3" Width="150" Height="50"  HorizontalAlignment="Left" VerticalAlignment="Center">
                                <TextBlock Text="Режим: ДЕЖУРНЫЙ" HorizontalAlignment="Center" VerticalAlignment="Center" TextAlignment="Center" TextWrapping="Wrap" FontSize="14"></TextBlock>
                            </Border>

                            <Border Name="BorderPE" Background="Red" BorderBrush="Gray" BorderThickness="1" CornerRadius="3" Width="150" Height="50"  HorizontalAlignment="Left" VerticalAlignment="Center">
                                <TextBlock Text="ЗЕМЛЯ В СЕТИ" HorizontalAlignment="Center" VerticalAlignment="Center" TextAlignment="Center" TextWrapping="Wrap" FontSize="14"></TextBlock>
                            </Border>

                            <Border Name="BorderFindPE" Background="LightSalmon" BorderBrush="Gray" BorderThickness="1" CornerRadius="3" Width="150" Height="50"  HorizontalAlignment="Left" VerticalAlignment="Center">
                                <TextBlock Text="ПОИСК ЗЕМЛИ" HorizontalAlignment="Center" VerticalAlignment="Center" TextAlignment="Center" TextWrapping="Wrap" FontSize="14"></TextBlock>
                            </Border>

                            <Border Name="BorderDistControl" Background="Red" BorderBrush="Gray" BorderThickness="1" CornerRadius="3" Width="150" Height="50"  HorizontalAlignment="Left" VerticalAlignment="Center">
                                <TextBlock Text="УПРАВЛЕНИЕ" HorizontalAlignment="Center" VerticalAlignment="Center" TextAlignment="Center" TextWrapping="Wrap" FontSize="14"></TextBlock>
                            </Border>

                            <Border Name="BorderLocalWithBlock" Background="Yellow" BorderBrush="Gray" BorderThickness="1" CornerRadius="3" Width="150" Height="50"  HorizontalAlignment="Left" VerticalAlignment="Center">
                                <TextBlock Text="МУ-Б" HorizontalAlignment="Center" VerticalAlignment="Center" TextAlignment="Center" TextWrapping="Wrap" FontSize="14"></TextBlock>
                            </Border>

                            <Border Name="BorderLocalWithoutBlock" Background="Pink" BorderBrush="Gray" BorderThickness="1" CornerRadius="3" Width="150" Height="50"  HorizontalAlignment="Left" VerticalAlignment="Center">
                                <TextBlock Text="МУ-ДБ" HorizontalAlignment="Center" VerticalAlignment="Center" TextAlignment="Center" TextWrapping="Wrap" FontSize="14"></TextBlock>
                            </Border>
                            <Border Name="BorderUnDefined" Background="Pink" BorderBrush="Gray" BorderThickness="1" CornerRadius="3" Width="150" Height="50" HorizontalAlignment="Left" VerticalAlignment="Center">
                                <TextBlock Text="Нет связи" HorizontalAlignment="Center" VerticalAlignment="Center" TextAlignment="Center" TextWrapping="Wrap" FontSize="14"></TextBlock>
                            </Border>



                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CFuse">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CFuse">
                    <Grid Height="90" Width="180" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30" />
                            <RowDefinition Height="30"/>
                            <RowDefinition Height="30"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>

                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter18"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">
                                <VisualState x:Name="VisualStateOn">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateOff">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOn">
                                    <!--РєР°Рє VisualStateUnDefined-->
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOff">
                                    <!--РєР°Рє VisualStateUnDefined-->
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateBroken">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateUnDefined">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateManualPE">
                                    <!--РєР°Рє VisualStateUnDefined-->
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="VisualStateOutOfWork">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.5" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Broken"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl">

                                </VisualState>
                                <VisualState x:Name="LocalControlBlock">

                                </VisualState>
                                <VisualState x:Name="LocalControlUnBlock">

                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid x:Name="RootGrid" local:CBaseControl.AttachedASUAngle="{TemplateBinding ASUAngle}" Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" Width="30" Height="30" RenderTransformOrigin="0.5,0.5">

                            <Canvas Width="28" Height="28" x:Name="RootCanvas">
                                <!--Background="#FF505050"-->
                                <Path Visibility="{TemplateBinding ASUConnectorLeftVisibility}" Opacity="1" x:Name="LeftConnector" Canvas.Left="0" Canvas.Top="0" Data="M-16,14 2,14" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1"/>
                                <Path Visibility="{TemplateBinding ASUConnectorRightVisibility}" Opacity="1" x:Name="RightConnector" Canvas.Left="0" Canvas.Top="0" Data="M25,14 44,14" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1"/>

                                <Path x:Name="FuseConnector" Canvas.Left="0" Canvas.Top="0" Data="M3,14 25,14" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="1"/>
                                <Rectangle Margin="1,6,1,1" Opacity="1" x:Name="Body" Stroke="{TemplateBinding ASUVoltageColor}" StrokeThickness="2" Width="26" Height="16"/>
                                <Path Opacity="0" x:Name="Broken" Canvas.Left="0" Canvas.Top="0" Data="M28,-1 -1,28" Stroke="Red" StrokeThickness="3"/>

                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black"  />
                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />

                            </Canvas>

                        </Grid>

                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowContent}" Grid.Column="{TemplateBinding ASUGridColumnContent}"  x:Name="contentPresenter18" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Margin="{TemplateBinding ASUMarginContent}" Opacity="1"/>
                        <Canvas Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Row="{TemplateBinding ASUGridRowASUTextContent}" Grid.Column="{TemplateBinding ASUGridColumnASUTextContent}" >
                            <TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Height="Auto" Width="{TemplateBinding ASUTextContentWidth}" VerticalAlignment="Center" HorizontalAlignment="Left" Visibility="{TemplateBinding ASUTextContentVisible}" x:Name="ASUTextContentPresenter" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTextContent}" Margin="{TemplateBinding ASUMarginText}" TextAlignment="Center" TextWrapping="Wrap" />
                        </Canvas>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CText">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CText">
                    <Grid Height="90" Width="180" HorizontalAlignment="Center" VerticalAlignment="Center">

                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter19"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">
                                <VisualState x:Name="VisualStateOn"/>
                                <VisualState x:Name="VisualStateOff"/>
                                <VisualState x:Name="VisualStateTurningOn"/>
                                <VisualState x:Name="VisualStateTurningOff"/>
                                <VisualState x:Name="VisualStateBroken"/>
                                <VisualState x:Name="VisualStateUnDefined"/>
                                <VisualState x:Name="VisualStateManualPE"/>
                                <VisualState x:Name="VisualStateOutOfWork"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl"/>
                                <VisualState x:Name="LocalControlBlock"/>
                                <VisualState x:Name="LocalControlUnBlock"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid x:Name="RootGrid" local:CBaseControl.AttachedASUAngle="{TemplateBinding ASUAngle}" VerticalAlignment="Center" HorizontalAlignment="Center" Width="30" Height="30" RenderTransformOrigin="0.5,0.5">
                            <Canvas Width="28" Height="28" x:Name="RootCanvas" VerticalAlignment="Center" HorizontalAlignment="Left">
                                <TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Height="Auto" Width="{TemplateBinding ASUTextContentWidth}" VerticalAlignment="Center" HorizontalAlignment="Left" Visibility="{TemplateBinding ASUTextContentVisible}" x:Name="ASUTextContentPresenter" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTextContent}" Margin="{TemplateBinding ASUMarginText}" TextAlignment="Center" TextWrapping="Wrap" />
                                <Border BorderThickness="1" CornerRadius="2" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding ActualWidth, ElementName=ASUTextContentPresenter}" Height="{Binding ActualHeight, ElementName=ASUTextContentPresenter}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black"  />
                                <Border BorderThickness="1" CornerRadius="2" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding ActualWidth, ElementName=ASUTextContentPresenter}" Height="{Binding ActualHeight, ElementName=ASUTextContentPresenter}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />
                            </Canvas>
                        </Grid>

                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" x:Name="contentPresenter19" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Margin="{TemplateBinding ASUMarginContent}" Opacity="0"/>



                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CCurrentDataDisplay">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CCurrentDataDisplay">
                    <Grid Height="auto" Width="auto" HorizontalAlignment="Center" VerticalAlignment="Center">

                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ASUTextContentPresenter"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">
                                <VisualState x:Name="VisualStateOn"/>
                                <VisualState x:Name="VisualStateOff"/>
                                <VisualState x:Name="VisualStateTurningOn"/>
                                <VisualState x:Name="VisualStateTurningOff"/>
                                <VisualState x:Name="VisualStateBroken"/>
                                <VisualState x:Name="VisualStateUnDefined"/>
                                <VisualState x:Name="VisualStateManualPE"/>
                                <VisualState x:Name="VisualStateOutOfWork"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl"/>
                                <VisualState x:Name="LocalControlBlock"/>
                                <VisualState x:Name="LocalControlUnBlock"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid x:Name="RootGrid" local:CBaseControl.AttachedASUAngle="{TemplateBinding ASUAngle}" VerticalAlignment="Center" HorizontalAlignment="Left" Width="auto" Height="auto" RenderTransformOrigin="0.5,0.5">

                            <StackPanel x:Name="ASUTextContentPresenter" Orientation="Horizontal">
                                <TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTagName}"  />
                                <TextBlock Margin="5,0,5,0" FontSize="{TemplateBinding ASUTextContentFontSize}" Foreground="{TemplateBinding ASUTextValueColorBrush}" Text="{TemplateBinding ASUContentValue}"  Visibility="{TemplateBinding ASULabelVisibility}" />
                                <TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTagUOM}"  Visibility="{TemplateBinding ASULabelVisibility}" />
                                <CheckBox Margin="5,0,5,0" IsEnabled="False" IsChecked="{TemplateBinding ASUDiscretContentValue}" Visibility="{TemplateBinding ASUCheckBoxVisibility}" />
                            </StackPanel>

                            <Border BorderThickness="1" CornerRadius="2" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding ActualWidth, ElementName=ASUTextContentPresenter}" Height="{Binding ActualHeight, ElementName=ASUTextContentPresenter}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black"  />
                            <Border BorderThickness="1" CornerRadius="2" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding ActualWidth, ElementName=ASUTextContentPresenter}" Height="{Binding ActualHeight, ElementName=ASUTextContentPresenter}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />

                        </Grid>

                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" x:Name="contentPresenter20" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Margin="{TemplateBinding ASUMarginContent}" Opacity="0"/>

                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CDiagnosticDevice">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CDiagnosticDevice">
                    <Grid Height="30" Width="90" HorizontalAlignment="Center" VerticalAlignment="Center">

                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ASUTextContentPresenter"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid x:Name="RootGrid" VerticalAlignment="Center" HorizontalAlignment="Center" Width="90" Height="30" RenderTransformOrigin="0.5,0.5">

                            <Canvas VerticalAlignment="Center" HorizontalAlignment="Center" Width="90" Height="30" x:Name="RootCanvas">
                                <!--Background="#FF505050"-->
                                <Border BorderThickness="2" CornerRadius="2" HorizontalAlignment="Center" VerticalAlignment="Center" Width="88" Height="28" Opacity="1" Background="Green" BorderBrush="{TemplateBinding ASUElementColorBrush}" x:Name="Body" Margin="1">
                                    <TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Height="Auto" Width="{Binding Width, ElementName=RootCanvas}" VerticalAlignment="Center" HorizontalAlignment="Center" x:Name="ASUTextContentPresenter" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTextContent}" TextAlignment="Center" TextWrapping="Wrap" />
                                </Border>
                                <Path Opacity="1" x:Name="RightConnector" Canvas.Left="0" Canvas.Top="0" Data="M88,15 105,15" Stroke="{TemplateBinding ASUElementColorBrush}" StrokeThickness="1"/>

                                <Border BorderThickness="2" CornerRadius="2" HorizontalAlignment="Center" VerticalAlignment="Center" Width="90" Height="30" Opacity="1" BorderBrush="Red" x:Name="Error" Visibility="{TemplateBinding ASUControlErrorVisibility}" />
                                <Border BorderThickness="1" CornerRadius="2" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black"  />
                                <Border BorderThickness="1" CornerRadius="2" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding Width, ElementName=RootCanvas}" Height="{Binding Height, ElementName=RootCanvas}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />
                            </Canvas>
                        </Grid>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>

        </Setter>
    </Style>

    <Style TargetType="local:CDiagnosticLine">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CDiagnosticLine">
                    <Grid  HorizontalAlignment="Center" VerticalAlignment="Center" >
                        <VisualStateManager.VisualStateGroups>

                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">

                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Canvas Width="{Binding ActualWidth, ElementName=RootGrid}"   Height="{Binding ActualHeight, ElementName=RootGrid}">


                            <Border x:Name="RootGrid" VerticalAlignment="Center" HorizontalAlignment="Center" Width="Auto" Height="Auto" RenderTransformOrigin="0.5,0.5">
                                <Line VerticalAlignment="Center" HorizontalAlignment="Center" x:Name="TheLine"  X1="0" Y1="0" X2="{TemplateBinding ASUCoordinateX2}" Y2="{TemplateBinding ASUCoordinateY2}" Fill="Black" Stroke="{TemplateBinding ASUElementColorBrush}" StrokeThickness="{TemplateBinding ASULineThickness}"/>
                            </Border>
                            <Border Canvas.Left="-5" Canvas.Top="-5"  BorderThickness="1" CornerRadius="2" HorizontalAlignment="Center" VerticalAlignment="Center"  Width="{Binding ActualWidth, Converter={StaticResource SizeConverter}, ElementName=RootGrid}"   Height="{Binding ActualHeight, Converter={StaticResource SizeConverter}, ElementName=RootGrid}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />
                            <Border Canvas.Left="-5" Canvas.Top="-5"  BorderThickness="1" CornerRadius="2" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding ActualWidth, Converter={StaticResource SizeConverter}, ElementName=RootGrid}" Height="{Binding ActualHeight, Converter={StaticResource SizeConverter}, ElementName=RootGrid}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black" />
                        </Canvas>

                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CDiagnosticRect">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CDiagnosticRect">
                    <Grid  HorizontalAlignment="Center" VerticalAlignment="Center" >
                        <VisualStateManager.VisualStateGroups>

                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">

                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Canvas Width="{Binding ActualWidth, ElementName=RootGrid}"   Height="{Binding ActualHeight, ElementName=RootGrid}">


                            <Border x:Name="RootGrid" VerticalAlignment="Center" HorizontalAlignment="Center" Width="Auto" Height="Auto" RenderTransformOrigin="0.5,0.5">
                                <Rectangle VerticalAlignment="Center" HorizontalAlignment="Center" x:Name="TheRect"  Width="{TemplateBinding ASUCoordinateX2}" Height="{TemplateBinding ASUCoordinateY2}" Stroke="{TemplateBinding ASUElementColorBrush}" StrokeThickness="{TemplateBinding ASULineThickness}"></Rectangle>
                            </Border>
                            <Border Canvas.Left="-5" Canvas.Top="-5"  BorderThickness="1" CornerRadius="2" HorizontalAlignment="Center" VerticalAlignment="Center"  Width="{Binding ActualWidth, Converter={StaticResource SizeConverter}, ElementName=RootGrid}"   Height="{Binding ActualHeight, Converter={StaticResource SizeConverter}, ElementName=RootGrid}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />
                            <Border Canvas.Left="-5" Canvas.Top="-5"  BorderThickness="1" CornerRadius="2" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding ActualWidth, Converter={StaticResource SizeConverter}, ElementName=RootGrid}" Height="{Binding ActualHeight, Converter={StaticResource SizeConverter}, ElementName=RootGrid}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black" />
                        </Canvas>

                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CDiagnosticText">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CDiagnosticText">
                    <Grid Height="90" Width="180" HorizontalAlignment="Center" VerticalAlignment="Center">

                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ASUTextContentPresenter"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid x:Name="RootGrid" local:CBaseControl.AttachedASUAngle="{TemplateBinding ASUAngle}" VerticalAlignment="Center" HorizontalAlignment="Center" Width="30" Height="30" RenderTransformOrigin="0.5,0.5">
                            <Canvas Width="28" Height="28" x:Name="RootCanvas" VerticalAlignment="Center" HorizontalAlignment="Left">
                                <TextBlock FontSize="{TemplateBinding ASUTextContentFontSize}" Height="Auto" Width="{TemplateBinding ASUTextContentWidth}" VerticalAlignment="Center" HorizontalAlignment="Left" x:Name="ASUTextContentPresenter" Foreground="{TemplateBinding ASUTextColorBrush}" Text="{TemplateBinding ASUTextContent}" TextAlignment="Center" TextWrapping="Wrap" />
                                <Border BorderThickness="1" CornerRadius="2" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding ActualWidth, ElementName=ASUTextContentPresenter}" Height="{Binding ActualHeight, ElementName=ASUTextContentPresenter}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black"  />
                                <Border BorderThickness="1" CornerRadius="2" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding ActualWidth, ElementName=ASUTextContentPresenter}" Height="{Binding ActualHeight, ElementName=ASUTextContentPresenter}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />
                            </Canvas>
                        </Grid>

                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" x:Name="contentPresenter20" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Opacity="0"/>

                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CBlock">
       
            <Setter Property="Background" Value="#FF448DCA"/>
            <Setter Property="Foreground" Value="#FF000000"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="VerticalContentAlignment" Value="Top"/>
            <Setter Property="Padding" Value="4,1,0,0"/>
            <Setter Property="BorderThickness" Value="3"/>
            <Setter Property="BorderBrush">
                <Setter.Value>
                    <LinearGradientBrush EndPoint="0.5,1" MappingMode="RelativeToBoundingBox" StartPoint="0.5,0">
                        <GradientStop Color="White" Offset="0.212"/>
                        <GradientStop Color="#FF413D33"/>
                        <GradientStop Color="Black" Offset="0.988"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="Template">
                <Setter.Value>
                <ControlTemplate TargetType="local:CBlock">
                        <Grid Height="40" HorizontalAlignment="Center" VerticalAlignment="Center">

                            <!--<Grid.RenderTransform>
                                <ScaleTransform x:Name="CanvasScale" ScaleX="2" ScaleY="2"></ScaleTransform>
                            </Grid.RenderTransform>-->

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="50" />
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>

                            <VisualStateManager.VisualStateGroups>

                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Normal">
                                    </VisualState>
                                    <VisualState x:Name="MouseOver">
                                    </VisualState>
                                    <VisualState x:Name="Pressed">
                                    </VisualState>
                                    <VisualState x:Name="Disabled">
                                    </VisualState>
                                </VisualStateGroup>

                                <VisualStateGroup x:Name="ASUCommutationDeviceStates">
                                    <VisualState x:Name="VisualStateOn">
                                    </VisualState>
                                    <VisualState x:Name="VisualStateOff">
                                    </VisualState>
                                    <VisualState x:Name="VisualStateTurningOn">
                                    </VisualState>
                                    <VisualState x:Name="VisualStateTurningOff">
                                    </VisualState>
                                    <VisualState x:Name="VisualStateBroken">
                                    </VisualState>
                                    <VisualState x:Name="VisualStateUnDefined">
                                    </VisualState>
                                    <VisualState x:Name="VisualStateManualPE">
                                    </VisualState>
                                    <VisualState x:Name="VisualStateOutOfWork">
                                    </VisualState>
                                </VisualStateGroup>

                                <VisualStateGroup x:Name="ControlModeStates">
                                    <VisualState x:Name="DistanceControl">
                                    </VisualState>
                                    <VisualState x:Name="LocalControlBlock">
                                    </VisualState>
                                    <VisualState x:Name="LocalControlUnBlock">
                                    </VisualState>
                                </VisualStateGroup>

                                <VisualStateGroup x:Name="LockStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition From="UnLocked" GeneratedDuration="0:0:0.3" To="Locked"/>
                                        <VisualTransition From="Locked" GeneratedDuration="0:0:0.3" To="UnLocked"/>
                                    </VisualStateGroup.Transitions>
                                    <VisualState x:Name="UnLocked">
                                        <Storyboard>
                                            <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Locked1"/>
                                            <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnLocked1"/>

                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Locked">
                                        <Storyboard>
                                            <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Locked1"/>
                                            <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnLocked1"/>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Undefined">
                                        <Storyboard>
                                            <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Locked1"/>
                                            <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnLocked1"/>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>

                                <VisualStateGroup x:Name="FocusStates">
                                    <VisualState x:Name="Focused"/>
                                    <VisualState x:Name="Unfocused"/>
                                </VisualStateGroup>

                                <VisualStateGroup x:Name="ValidationStates">
                                    <VisualState x:Name="Valid"/>
                                    <VisualState x:Name="InvalidUnfocused"/>
                                    <VisualState x:Name="InvalidFocused"/>
                                </VisualStateGroup>

                            </VisualStateManager.VisualStateGroups>

                            <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                            <ToolTipService.ToolTip>
                                <ContentPresenter VerticalAlignment="Top" HorizontalAlignment="Left" Grid.Column="1"  x:Name="contentPresenter1" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Opacity="1"/>

                            </ToolTipService.ToolTip>
                            <Path x:Name="UnLocked1" Data="M38.499996,16.660284 L38.499992,6.6663327 L39.12915,5.3824968 L40.387455,4.9128499 L50.633648,4.9121695 L51.757126,5.4252377 L52.520741,6.3217659 L52.521103,16.576818" 
                                  Margin="16,2,1,16" Stretch="Fill" Stroke="{TemplateBinding BorderBrush}"  Opacity="0" StrokeThickness="3" UseLayoutRounding="True" Height="15" Width="15" />

                                <Path x:Name="Locked1" Data="M38.499996,16.660284 L38.499992,6.6663327 L39.12915,5.3824968 L40.387455,4.9128499 L50.633648,4.9121695 L51.757126,5.4252377 L52.520741,6.3217659 L52.521103,16.576818" 
                                  Margin="3,2,14,16" Stretch="Fill" Stroke="{TemplateBinding BorderBrush}"  Opacity="1" StrokeThickness="3" UseLayoutRounding="True" Height="15" Width="15" />

                                <Rectangle x:Name="Body" Height="17" Margin="1,14,0,2" RadiusY="2" RadiusX="2" StrokeThickness="3" Width="20" HorizontalAlignment="Left"  Fill="#FFF9CD00">
                                    <Rectangle.Stroke>
                                        <LinearGradientBrush EndPoint="0.5,1" MappingMode="RelativeToBoundingBox" StartPoint="0.5,0">
                                            <GradientStop Color="#FFFBF205" Offset="0.212"/>
                                            <GradientStop Color="#FF413D33"/>
                                            <GradientStop Color="#FF606A26" Offset="0.988"/>
                                        </LinearGradientBrush>
                                    </Rectangle.Stroke>
                                </Rectangle>

                                <Ellipse Fill="Black" HorizontalAlignment="Left" Margin="9,0,0,10" StrokeThickness="2" Width="4" Stroke="Black" Height="4" VerticalAlignment="Bottom"/>
                                <Rectangle Fill="Black" HorizontalAlignment="Left" Height="3" Margin="10,0,0,8" RadiusY="0" RadiusX="2" Stroke="Black" StrokeThickness="1" VerticalAlignment="Bottom" Width="2"/>

                                <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="30" Height="30" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />

                            </Grid>

                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    <Style TargetType="local:CBlockCommonAccess">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="VerticalContentAlignment" Value="Top"/>
        <Setter Property="Padding" Value="4,1,0,0"/>
        <Setter Property="BorderThickness" Value="3"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" MappingMode="RelativeToBoundingBox" StartPoint="0.5,0">
                    <GradientStop Color="White" Offset="0.212"/>
                    <GradientStop Color="#FF413D33"/>
                    <GradientStop Color="Black" Offset="0.988"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CBlockCommonAccess">
                    <Grid Height="40" HorizontalAlignment="Center" VerticalAlignment="Center">

                        <Grid.RenderTransform>
                            <ScaleTransform x:Name="CanvasScale" ScaleX="2" ScaleY="2"></ScaleTransform>
                        </Grid.RenderTransform>

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50" />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>

                        <VisualStateManager.VisualStateGroups>

                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                </VisualState>
                                <VisualState x:Name="Disabled">
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">
                                <VisualState x:Name="VisualStateOn">
                                </VisualState>
                                <VisualState x:Name="VisualStateOff">
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOn">
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOff">
                                </VisualState>
                                <VisualState x:Name="VisualStateBroken">
                                </VisualState>
                                <VisualState x:Name="VisualStateUnDefined">
                                </VisualState>
                                <VisualState x:Name="VisualStateManualPE">
                                </VisualState>
                                <VisualState x:Name="VisualStateOutOfWork">
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl">
                                </VisualState>
                                <VisualState x:Name="LocalControlBlock">
                                </VisualState>
                                <VisualState x:Name="LocalControlUnBlock">
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="LockStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition From="UnLocked" GeneratedDuration="0:0:0.3" To="Locked"/>
                                    <VisualTransition From="Locked" GeneratedDuration="0:0:0.3" To="UnLocked"/>
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="UnLocked">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Locked1"/>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnLocked1"/>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderLocal"/>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderDistacne"/>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderUndefined"/>

                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Locked">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Locked1"/>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnLocked1"/>
                                        <DoubleAnimation Duration="0:0:0.5" AutoReverse="True" RepeatBehavior="Forever" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BorderLocal"/>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderDistacne"/>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderUndefined"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Undefined">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Locked1"/>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="UnLocked1"/>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderLocal"/>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderDistacne"/>
                                        <DoubleAnimation Duration="0:0:0.5" AutoReverse="True" RepeatBehavior="Forever" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BorderUndefined"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>

                        </VisualStateManager.VisualStateGroups>

                        <Grid Visibility="{TemplateBinding ASULockerVisibility}" HorizontalAlignment="Center" VerticalAlignment="Center">

                            <Path x:Name="UnLocked1" Data="M38.499996,16.660284 L38.499992,6.6663327 L39.12915,5.3824968 L40.387455,4.9128499 L50.633648,4.9121695 L51.757126,5.4252377 L52.520741,6.3217659 L52.521103,16.576818" 
                                  Margin="16,2,1,16" Stretch="Fill" Stroke="{TemplateBinding BorderBrush}"  Opacity="0" StrokeThickness="3" UseLayoutRounding="True" Height="15" Width="15" />

                            <Path x:Name="Locked1" Data="M38.499996,16.660284 L38.499992,6.6663327 L39.12915,5.3824968 L40.387455,4.9128499 L50.633648,4.9121695 L51.757126,5.4252377 L52.520741,6.3217659 L52.521103,16.576818" 
                                  Margin="3,2,14,16" Stretch="Fill" Stroke="{TemplateBinding BorderBrush}"  Opacity="1" StrokeThickness="3" UseLayoutRounding="True" Height="15" Width="15" />

                            <Rectangle x:Name="Body" Height="17" Margin="1,14,0,2" RadiusY="2" RadiusX="2" StrokeThickness="3" Width="20" HorizontalAlignment="Left"  Fill="#FFF9CD00">
                                <Rectangle.Stroke>
                                    <LinearGradientBrush EndPoint="0.5,1" MappingMode="RelativeToBoundingBox" StartPoint="0.5,0">
                                        <GradientStop Color="#FFFBF205" Offset="0.212"/>
                                        <GradientStop Color="#FF413D33"/>
                                        <GradientStop Color="#FF606A26" Offset="0.988"/>
                                    </LinearGradientBrush>
                                </Rectangle.Stroke>
                            </Rectangle>

                            <Ellipse Fill="Black" HorizontalAlignment="Left" Margin="9,0,0,10" StrokeThickness="2" Width="4" Stroke="Black" Height="4" VerticalAlignment="Bottom"/>
                            <Rectangle Fill="Black" HorizontalAlignment="Left" Height="3" Margin="10,0,0,8" RadiusY="0" RadiusX="2" Stroke="Black" StrokeThickness="1" VerticalAlignment="Bottom" Width="2"/>

                            <Border BorderThickness="1" CornerRadius="2" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Width="30" Height="30" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />

                        </Grid>

                        <Grid Grid.Column="1" Visibility="{TemplateBinding ASUContentVisibility}" HorizontalAlignment="Center" VerticalAlignment="Center">

                            <Border Name="BorderLocal" Background="LightPink" Opacity="0" BorderBrush="Red" BorderThickness="3" CornerRadius="3" Width="200" Height="30"  HorizontalAlignment="Center" VerticalAlignment="Center">
                                <TextBlock Text="Местное управление" HorizontalAlignment="Center" VerticalAlignment="Center" TextAlignment="Center" TextWrapping="Wrap" FontSize="10" ></TextBlock>
                            </Border>

                            <Border Name="BorderDistacne" Background="LightGreen" Opacity="0" BorderBrush="Gray" BorderThickness="3" CornerRadius="1" Width="200" Height="30"  HorizontalAlignment="Left" VerticalAlignment="Center">
                                <TextBlock Text="Дистанционное управление" HorizontalAlignment="Center" VerticalAlignment="Center" TextAlignment="Center" TextWrapping="Wrap" FontSize="10"></TextBlock>
                            </Border>

                            <Border Name="BorderUndefined" Background="LightGray" Opacity="1" BorderBrush="Gray" BorderThickness="3" CornerRadius="1" Width="200" Height="30"  HorizontalAlignment="Left" VerticalAlignment="Center">
                                <TextBlock Text="Неопределенное положение ключа" HorizontalAlignment="Center" VerticalAlignment="Center" TextAlignment="Center" TextWrapping="Wrap" FontSize="10"></TextBlock>
                            </Border>
                        </Grid>

                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CToolTip">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="VerticalContentAlignment" Value="Top"/>
        <Setter Property="Padding" Value="0,0,0,0"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CToolTip">
                    <Grid Height="Auto" Width="Auto" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="0,0,0,0">
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver"/>
                                <VisualState x:Name="Pressed"/>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="CheckStates">
                                <VisualState x:Name="Checked">
                                    <Storyboard>
                                        <ColorAnimation Duration="0" To="LightGreen" Storyboard.TargetName="RootLA" Storyboard.TargetProperty="Background.Color"></ColorAnimation>

                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Unchecked">
                                    <Storyboard>
                                        <ColorAnimation Duration="0"  To="Red" Storyboard.TargetName="RootLA" Storyboard.TargetProperty="Background.Color"></ColorAnimation>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Indeterminate">
                                    <Storyboard>
                                        <ColorAnimation Duration="0"  To="LightYellow" Storyboard.TargetName="RootLA" Storyboard.TargetProperty="Background.Color"></ColorAnimation>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Border   Background="LightYellow" Name="RootLA" >
                            <ContentPresenter x:Name="contentPresenter" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Grid.Row="1" RenderTransformOrigin="0.5,0.5" >

                            </ContentPresenter>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CToolTipSwitch">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="VerticalContentAlignment" Value="Top"/>
        <Setter Property="Padding" Value="0,0,0,0"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CToolTipSwitch">
                    <Border CornerRadius="1" BorderThickness="2" BorderBrush="Gray" Margin="-1,-1,0,-1">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver">

                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="BackgroundOverlay" Storyboard.TargetProperty="Opacity" Duration="0" To=".55"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Pressed"/>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="CheckStates">
                                <VisualState x:Name="Checked">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.2" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="Switch"/>
                                        <DoubleAnimation Duration="0:0:0.2" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BodyOn"/>
                                        <DoubleAnimation Duration="0:0:0.2" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BodyOff"/>
                                        <DoubleAnimation Duration="0:0:0.2" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="Undefined"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Unchecked">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.2" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="Switch"/>
                                        <DoubleAnimation Duration="0:0:0.2" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BodyOn"/>
                                        <DoubleAnimation Duration="0:0:0.2" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BodyOff"/>
                                        <DoubleAnimation Duration="0:0:0.2" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="Undefined"/>
                                    </Storyboard>
                                </VisualState>                               
                                <VisualState x:Name="Indeterminate">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0:0:0.2" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="Switch"/>
                                        <DoubleAnimation Duration="0:0:0.2" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BodyOn"/>
                                        <DoubleAnimation Duration="0:0:0.2" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BodyOff"/>
                                        <DoubleAnimation Duration="0:0:0.2" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="Undefined"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid Height="Auto" Width="Auto" VerticalAlignment="Center" HorizontalAlignment="Center" >
                            <Grid.RowDefinitions>
                                <RowDefinition/>
                                <RowDefinition/>
                            </Grid.RowDefinitions>
                            <Rectangle x:Name="BackgroundOverlay" Fill="LightYellow" Height="30" Width="80" Opacity="0" RadiusX="1" RadiusY="1" StrokeThickness="1" Margin="1" Stroke="DarkGray"/>
                            <Grid VerticalAlignment="Center" HorizontalAlignment="Center">
                                <Canvas Width="80" Height="20" >
                                    <Path x:Name="BodyOff" Canvas.Left="0" Canvas.Top="0" Data="M-1,10 h38 l15,-12" Stroke="Black" StrokeThickness="2"/>
                                    <Path x:Name="Body" Canvas.Left="0" Canvas.Top="0" Data="M48,10 h33" Stroke="Black" StrokeThickness="2"/>
                                    <Path x:Name="BodyOn" Canvas.Left="0" Canvas.Top="0" Data="M-1,10 h38 l15,12" Stroke="Black" StrokeThickness="2"/>
                                    <Path x:Name="Switch" Canvas.Left="0" Canvas.Top="0" Data="M47,9 v15" Stroke="Black" StrokeThickness="2"/>
                                    <Path x:Name="Undefined" Canvas.Left="0" Canvas.Top="0" Data="M-1,10 h82" Stroke="Black" StrokeThickness="2"/>
                                </Canvas>
                            </Grid>

                            <ContentPresenter Width="80" x:Name="contentPresenter" HorizontalAlignment="Center" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Grid.Row="1"  RenderTransformOrigin="0.5,0.5" />

                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:CMnemoLinkArea">
        <Setter Property="Background" Value="#FF448DCA"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CMnemoLinkArea">
                    <Grid  HorizontalAlignment="Center" VerticalAlignment="Center" >
                        <VisualStateManager.VisualStateGroups>

                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".2" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="RootLA"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter1"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ASUCommutationDeviceStates">
                                <VisualState x:Name="VisualStateOn">
                                </VisualState>
                                <VisualState x:Name="VisualStateOff">
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOn">
                                </VisualState>
                                <VisualState x:Name="VisualStateTurningOff">
                                </VisualState>
                                <VisualState x:Name="VisualStateBroken">
                                </VisualState>
                                <VisualState x:Name="VisualStateUnDefined">
                                </VisualState>
                                <VisualState x:Name="VisualStateManualPE">
                                </VisualState>
                                <VisualState x:Name="VisualStateOutOfWork">
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ControlModeStates">
                                <VisualState x:Name="DistanceControl">
                                </VisualState>
                                <VisualState x:Name="LocalControlBlock">
                                </VisualState>
                                <VisualState x:Name="LocalControlUnBlock">
                                </VisualState>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>
                                <VisualState x:Name="InvalidUnfocused"/>
                                <VisualState x:Name="InvalidFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Canvas Width="{Binding ActualWidth, ElementName=RootGrid}"   Height="{Binding ActualHeight, ElementName=RootGrid}"  ToolTipService.ToolTip="{TemplateBinding ASUMnemoLinkName}">


                            <Border x:Name="RootGrid" VerticalAlignment="Center" HorizontalAlignment="Center" Width="Auto" Height="Auto" RenderTransformOrigin="0.5,0.5">
                                <Rectangle VerticalAlignment="Center" HorizontalAlignment="Center" x:Name="TheRect"  Width="{TemplateBinding ASUCoordinateX2}" Height="{TemplateBinding ASUCoordinateY2}" Stroke="{TemplateBinding ASUBorderColorBrush}" StrokeThickness="{TemplateBinding ASULineThickness}"></Rectangle>
                            </Border>
                            <Border Canvas.Left="-5" Canvas.Top="-5"  BorderThickness="1" CornerRadius="2" HorizontalAlignment="Center" VerticalAlignment="Center"  Width="{Binding ActualWidth, Converter={StaticResource SizeConverter}, ElementName=RootGrid}"   Height="{Binding ActualHeight, Converter={StaticResource SizeConverter}, ElementName=RootGrid}" Opacity="0.3"  BorderBrush="Red" x:Name="IsSelected" Background="LightPink" Visibility="{TemplateBinding ASUControlSelectedVisibility}" />
                            <Border Canvas.Left="-5" Canvas.Top="-5"  BorderThickness="1" CornerRadius="2" HorizontalAlignment="Center" VerticalAlignment="Center" Width="{Binding ActualWidth, Converter={StaticResource SizeConverter}, ElementName=RootGrid}" Height="{Binding ActualHeight, Converter={StaticResource SizeConverter}, ElementName=RootGrid}" Opacity="0" BorderBrush="Black" x:Name="RootLA" Background="Black" />
                        </Canvas>

                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    
</ResourceDictionary>
